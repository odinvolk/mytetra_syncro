<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Язык PHP очень легок для изучения. Это, а так же обилие литературы «Освой _что_угодно_ за 24 часа» породило большое количество, мягко говоря, некачественного кода. Как следствие, рано или поздно любой программист, который выходит за рамки создания гостевой книги или сайта-визитки сталкивается с вопросом: «а если я здесь немножко добавлю, все остальное не ляжет?» Дать ответ на этот вопрос и на многие другие может юнит-тестирование.<br /><br />В самом начале хочется оговориться — здесь речь не будет идти о TDD и методологиях разработки ПО. В данной статье я попробую показать начинающему PHP-разработчику основы использования модульного тестирования на базе фреймворка PHPUnit<br /></p>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:xx-large; font-weight:600;">Вместо предисловия</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Вначале возникает вполне резонный вопрос: <span style=" font-style:italic;">А зачем, если все и так работает?</span><br />Здесь все просто. После очередного изменения что-то перестанет работать так как надо — это я вам обещаю. И тогда поиск ошибки может отнять очень много времени. Модульное тестирование может свести этот процесс к считанным минутам. Не будем так же исключать переезд на другую платформу и связанные с ним «подводные камни». Чего только стоит разность в точности вычислений на 64- и 32-разрядных системах. А когда-то вы в первый раз столкнетесь с нюансами вроде <br /><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#3a00ff;">&lt;?php</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#990000;">print</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000000;">int</span><span style=" font-family:'Courier New,courier'; color:#009900;">)((</span><span style=" font-family:'Courier New,courier'; color:#800080;">0.1</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">+</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#800080;">0.7</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">*</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">10</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#666666;">// думаете 8? проверьте ...</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#666666;">// или лучше так: &quot;Вы еще не используете BC Math? Тогда мы идем к вам!&quot;</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br />Если вопрос необходимости отпал, то можно приступить к выбору инструмента. Здесь ассортимент в общем-то невелик — <span style=" font-weight:600;">PHPUnit</span> (<a href="http://www.phpunit.de/"><span style=" text-decoration: underline; color:#0000ff;">http://www.phpunit.de/</span></a>) и <span style=" font-weight:600;">SimpleTest</span> (<a href="http://www.simpletest.org/"><span style=" text-decoration: underline; color:#0000ff;">http://www.simpletest.org/</span></a>). Поскольку PHPUnit уже стал стандартом де-факто в тестировании PHP приложений, то на нем и остановимся.<br /><br /></p>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:xx-large; font-weight:600;">Первое знакомство</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Вопросы установки рассматривать не будем: все достаточно внятно изложено на <a href="http://www.phpunit.de/manual/current/en/installation.html"><span style=" text-decoration: underline; color:#0000ff;">сайте</span></a>. Попробуем лучше понять, как это все работает.<br /><br />Допустим, есть у нас некий класс «MyClass», одним из методов реализующий возведение числа в степень. (Здесь вынужден извиниться, но все примеры, в общем-то, высосаны из пальца)<br /><br /><span style=" color:#7f7f7f;">MyClass.php</span><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#3a00ff;">&lt;?php</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">class</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MyClass </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">public</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> power</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000088;">$x</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$y</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#b1b100;">return</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#990000;">pow</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000088;">$x</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$y</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br />Хочется проверить, правильно ли он работает. О всем классе речь пока не идет — только об одном методе. Напишем для проверки такой тест.<br /><br /><span style=" color:#7f7f7f;">MyClassTest.php</span><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#3a00ff;">&lt;?php</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'PHPUnit/Framework.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'MyClass.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br /></span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">class</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MyClassTest </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">extends</span><span style=" font-family:'Courier New,courier'; color:#000000;"> PHPUnit_Framework_TestCase </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">public</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> testPower</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$my</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">=</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">new</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MyClass</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">assertEquals</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">8</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$my</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">power</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">2</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">3</span><span style=" font-family:'Courier New,courier'; color:#009900;">))</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br /> </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br />Небольшое отступление о формате тестов.<br /></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Название класса в тесте складывается из названия тестируемого класса плюс «Test»;</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Класс для тестирования в большинстве случаев наследуется от PHPUnit_Framework_TestCase;</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Каждый тест является паблик-методом, название которого начинается с префикса «test»;</li>
<li style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Внутри теста мы используем один из assert-методов для выяснения соответствует ли результат обработки ожидаемому (подробнее чуть ниже);</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Теперь глядя на тест мы можем понять, что тестируя метод возведения в степень мы создаем экземпляр класса, вызываем нужный нам метод с заранее определенными значениями и проверяем правильно ли были проведены вычисления. Для этой проверки был использован метод <span style=" font-weight:600;">assertEquals()</span>, который первым обязательным параметром принимает ожидаемое значение, вторым актуальное и проверяет их соответствие. Размяв мозги и освежив в памяти знания таблицы умножения, мы предположили, что 2<span style=" vertical-align:super;">3</span>=8. На этих данных мы и проверим, как работает наш метод.<br />Запускаем тест: <br /><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#000000;">$ phpunit MyClassTest<br />.<br />Time: 0 seconds<br />OK (1 test, 1 assertion)</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br />Результат выполнения теста «ОК». Казалось бы можно остановиться на этом, но иногда было бы неплохо для проверки скормить методу не один набор данных. PHPUnit предоставляет нам такую возможность — это провайдеры данных. Провайдер данных тоже является паблик-методом (название не существенно), который возвращает массив наборов данных для каждой итеррации. Для использования провайдера необходимо указать его в теге <span style=" font-weight:600;">@dataProvider</span> к тесту.<br /><br />Изменим наш тест следующим образом: <br /><br /><span style=" color:#7f7f7f;">MyClassTest.php</span><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#3a00ff;">&lt;?php</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'PHPUnit/Framework.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'MyClass.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br /></span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">class</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MyClassTest </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">extends</span><span style=" font-family:'Courier New,courier'; color:#000000;"> PHPUnit_Framework_TestCase </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#009933;">/** <br />    * @dataProvider providerPower <br />    */</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">public</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> testPower</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000088;">$a</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$b</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$c</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$my</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">=</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">new</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MyClass</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">assertEquals</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000088;">$c</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$my</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">power</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000088;">$a</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$b</span><span style=" font-family:'Courier New,courier'; color:#009900;">))</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">public</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> providerPower </span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#b1b100;">return</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#990000;">array</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />            </span><span style=" font-family:'Courier New,courier'; color:#990000;">array</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">2</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">2</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">4</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />            </span><span style=" font-family:'Courier New,courier'; color:#990000;">array</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">2</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">3</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">9</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />            </span><span style=" font-family:'Courier New,courier'; color:#990000;">array</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">3</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">5</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">243</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br />После запуска увидим следующую картину: <br /><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#000000;">.F.<br />Time: 0 seconds<br />There was 1 failure:<br />1) testPower(MyClassTest) with data set #1 (2, 3, 9)<br />Failed asserting that &lt;integer:8&gt; matches expected value &lt;integer:9&gt;.<br />/home/user/unit/MyClassTest.php:14<br />FAILURES!<br />Tests: 3, Assertions: 3, Failures: 1.</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br />Опишу подробнее. Точка, которую в первом выводе теста многие могли принять за опечатку на самом деле таковой не является — это успешно пройденный тест. F(ailure) — соответственно тест не пройденный. Значит в данном случае, было проведено 3 теста, один из который завершился неудачно. В расширенном описании нам было сказано, какой именно, с каким набором исходных данных, с каким реальным и каким ожидаемым результатом. Если бы 2<span style=" vertical-align:super;">3</span> действительно равнялось 9-ти, то мы увидели бы таким образом ошибку в нашем сценарии.<br /><br />Здесь, как мне кажется, есть смысл отвлечься от несколько абстрактной практики и перейти ко вполне конкретной теории. А именно, описать какими же assert-методами мы располагаем для проверки поведения тестируемых сценариев.<br /><br />Два самых простых — это <span style=" font-weight:600;">assertFalse()</span> и <span style=" font-weight:600;">assertTrue()</span>. Проверяют, является ли полученное значение false и true соответственно. Далее идут уже упомянутый <span style=" font-weight:600;">assertEquals()</span> и обратный ему <span style=" font-weight:600;">assertNotEquals()</span>. В их использовании есть нюансы. Так при сравнении чисел с плавающей точкой есть возможность указать точность сравнения. Так же эти методы используются для сравнения экземпляров класса DOMDocument, массивов и любых объектов (в последнем случае равенство будет установлено, если атрибуты объектов содержат одинаковые значения). Так же следует упомянуть <span style=" font-weight:600;">assertNull()</span> и <span style=" font-weight:600;">assertNotNull()</span> которые проверяют соответствие параметра типу данных NULL (да-да, не забываем, что в PHP это отдельный тип данных). Этим возможные сравнения не ограничиваются. Нет смысла в рамках этой статьи заниматься перепечаткой документации, потому приведу по возможности структурированный список всех возможных методов. Более детально интересующиеся могут прочитать <a href="http://www.phpunit.de/manual/current/en/api.html#api.assert"><span style=" text-decoration: underline; color:#0000ff;">здесь</span></a><br /><br /><span style=" text-decoration: underline;">Базовые методы сравнения</span><br />assertTrue() / assertFalse()<br />assertEquals() / assertNotEquals()<br />assertGreaterThan()<br />assertGreaterThanOrEqual()<br />assertLessThan()<br />assertLessThanOrEqual()<br />assertNull() / assertNotNull()<br />assertType() / assertNotType()<br />assertSame() / assertNotSame()<br />assertRegExp() / assertNotRegExp()<br /><br /><span style=" text-decoration: underline;">Методы сравнения массивов</span><br />assertArrayHasKey() / assertArrayNotHasKey()<br />assertContains() / assertNotContains()<br />assertContainsOnly() / assertNotContainsOnly()<br /><br /><span style=" text-decoration: underline;">ООП специфичные методы</span><br />assertClassHasAttribute() / assertClassNotHasAttribute()<br />assertClassHasStaticAttribute() / assertClassNotHasStaticAttribute()<br />assertAttributeContains() / assertAttributeNotContains()<br />assertObjectHasAttribute() / assertObjectNotHasAttribute()<br />assertAttributeGreaterThan()<br />assertAttributeGreaterThanOrEqual()<br />assertAttributeLessThan()<br />assertAttributeLessThanOrEqual()<br /><br /><span style=" text-decoration: underline;">Методы сравнения файлов</span><br />assertFileEquals() / assertFileNotEquals()<br />assertFileExists() / assertFileNotExists()<br />assertStringEqualsFile() / assertStringNotEqualsFile()<br /><br /><span style=" text-decoration: underline;">Методы сравнения XML</span><br />assertEqualXMLStructure()<br />assertXmlFileEqualsXmlFile() / assertXmlFileNotEqualsXmlFile()<br />assertXmlStringEqualsXmlFile() / assertXmlStringNotEqualsXmlFile()<br />assertXmlStringEqualsXmlString() / assertXmlStringNotEqualsXmlString()<br /><br /><span style=" text-decoration: underline;">Разное</span><br />assertTag()<br />assertThat()<br /><br /></p>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:xx-large; font-weight:600;">Исключения</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Если еще не надоело, то вернемся к практике, а именно к обработке исключений. Для начала модифицируем наш тестируемый класс — введем в него метод, который будет это исключение выбрасывать.<br /><br /><span style=" color:#7f7f7f;">MyClass.php</span><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#3a00ff;">&lt;?php</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">class</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MathException </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">extends</span><span style=" font-family:'Courier New,courier'; color:#000000;"> Exception </span><span style=" font-family:'Courier New,courier'; color:#009900;">{}</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br /></span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">class</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MyClass </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#666666;">// ...</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">public</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> divide</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000088;">$x</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$y</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#b1b100;">if</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#339933;">!</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000000;">boolean</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#000088;">$y</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />            throw </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">new</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MathException</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'Division by zero'</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#b1b100;">return</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$x</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">/</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$y</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br />Теперь надо создать тест, который будет завершаться успешно в том случае, если при определенном наборе данных будет вызвано это исключение. Задать требуемое исключение можно как минимум двумя способами — добавив к тесту <span style=" font-weight:600;">@expectedException</span> либо вызвав в тесте метод <span style=" font-weight:600;">setExpectedException()</span>.<br /><br /><span style=" color:#7f7f7f;">MyClassTest.php</span><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#3a00ff;">&lt;?php</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'PHPUnit/Framework.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'MyClass.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br /></span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">class</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MyClassTest </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">extends</span><span style=" font-family:'Courier New,courier'; color:#000000;"> PHPUnit_Framework_TestCase </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#666666;">// ...</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#009933;">/** <br />    * @expectedException MathException <br />    */</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">public</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> testDivision1</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$my</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">=</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">new</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MyClass</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$my</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">divide</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">8</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">0</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">public</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> testDivision2 </span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">setExpectedException</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'MathException'</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$my</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">=</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">new</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MyClass</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$my</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">divide</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">8</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">0</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br />Тесты, в общем-то, абсолютно идентичны. Выбор способа остается на ваше усмотрение. Помимо механизмов предоставляемых непосредственно PHPUnit, для тестирования исключений можно воспользоваться стандартным try {…} catch (), к примеру, так: <br /><br /><span style=" color:#7f7f7f;">MyClassTest.php</span><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#3a00ff;">&lt;?php</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'PHPUnit/Framework.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'MyClass.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br /></span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">class</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MyClassTest </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">extends</span><span style=" font-family:'Courier New,courier'; color:#000000;"> PHPUnit_Framework_TestCase </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#666666;">// ...</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">public</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> testDivision3</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$my</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">=</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">new</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MyClass</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        try </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />            </span><span style=" font-family:'Courier New,courier'; color:#000088;">$my</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">divide</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">8</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">2</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />        </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"> catch </span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000000;">MathException </span><span style=" font-family:'Courier New,courier'; color:#000088;">$e</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />            </span><span style=" font-family:'Courier New,courier'; color:#b1b100;">return</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />        </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">fail</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'Not raise an exception'</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br />В этом примере мы так же видим не рассмотренный ранее способ завершения теста с помощью вызова метода <span style=" font-weight:600;">fail()</span>. Вывод теста будет следующим: <br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#000000;">F<br />Time: 0 seconds<br />There was 1 failure:<br />1) testDivision3(MyClassTest)<br />Not raise an exception<br />/home/user/unit/MyClassTest.php:50</span><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:xx-large; font-weight:600;">Принадлежности</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Базовые методы тестирования мы освоили. Можно ли улучшить наш тест? Да. Написанный c начала этой статьи класс проводит несколько тестов, в каждом из которых создается экземпляр тестируемого класса, что абсолютно излишне, потому как PHPUnit предоставляет в наше пользование механизм принадлежностей теста (fixtures). Установить их можно защищенным методом <span style=" font-weight:600;">setUp()</span>, который вызывается один раз перед началом каждого теста. После окончания теста вызывается метод <span style=" font-weight:600;">tearDown()</span>, в котором мы можем провести «сборку мусора». Таким образом, исправленный тест может выглядеть так: <br /><br /><span style=" color:#7f7f7f;">MyClassTest.php</span><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#3a00ff;">&lt;?php</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'PHPUnit/Framework.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'MyClass.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    <br /></span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">class</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MyClassTest </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">extends</span><span style=" font-family:'Courier New,courier'; color:#000000;"> PHPUnit_Framework_TestCase </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    protected </span><span style=" font-family:'Courier New,courier'; color:#000088;">$fixture</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    protected </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> setUp</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">fixture</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">=</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">new</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MyClass </span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    protected </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> tearDown</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">fixture</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">=</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">NULL</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#009933;">/** <br />    * @dataProvider providerPower <br />    */</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">public</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> testPower</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000088;">$a</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$b</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$c</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">assertEquals</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000088;">$c</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">fixture</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">power</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000088;">$a</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$b</span><span style=" font-family:'Courier New,courier'; color:#009900;">))</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    <br />    </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">public</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> providerPower</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#b1b100;">return</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#990000;">array</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />            </span><span style=" font-family:'Courier New,courier'; color:#990000;">array</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">2</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">2</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">4</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />            </span><span style=" font-family:'Courier New,courier'; color:#990000;">array</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">2</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">3</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">8</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />            </span><span style=" font-family:'Courier New,courier'; color:#990000;">array</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">3</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">5</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">243</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#666666;">// …</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br /></span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:xx-large; font-weight:600;">Наборы тестов</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />После того, как код нескольких классов будет покрыт тестами, становится довольно таки неудобно запускать каждый тест по отдельности. Здесь нам на помощь могут прийти наборы тестов — несколько связанных единой задачей тестов можно объединить в набор и запускать соответственно его. Наборы реализованы классом <span style=" font-weight:600;">PHPUnit_Framework_TestSuite</span>. Необходимо создать экземпляр этого класса и добавить в него необходимые тесты с помощью метода <span style=" font-weight:600;">addTestSuite()</span>. Так же с помощью метода <span style=" font-weight:600;">addTest()</span> возможно добавление другого набора.<br /><br /><span style=" color:#7f7f7f;">SpecificTests.php</span><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#3a00ff;">&lt;?php</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'PHPUnit/Framework.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#666666;">// подключаем файлы с тестами</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'MyClassTest.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br /></span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">class</span><span style=" font-family:'Courier New,courier'; color:#000000;"> SpecificTests<br /></span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">public</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#990000;">static</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> suite</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$suite</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">=</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">new</span><span style=" font-family:'Courier New,courier'; color:#000000;"> PHPUnit_Framework_TestSuite</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'MySuite'</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#666666;">// добавляем тест в набор</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$suite</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">addTestSuite</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'MyClassTest'</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />        </span><span style=" font-family:'Courier New,courier'; color:#b1b100;">return</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$suite</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br /><span style=" color:#7f7f7f;">AllTests.php</span><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#3a00ff;">&lt;?php</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'PHPUnit/Framework.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#666666;">// подключаем файл с набором тестов</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'SpecificTests.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br /></span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">class</span><span style=" font-family:'Courier New,courier'; color:#000000;"> AllTests<br /></span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">public</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#990000;">static</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> suite</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$suite</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">=</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">new</span><span style=" font-family:'Courier New,courier'; color:#000000;"> PHPUnit_Framework_TestSuite</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'AllMySuite'</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#666666;">// добавляем набор тестов</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$suite</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">addTest</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000000;">SpecificTests</span><span style=" font-family:'Courier New,courier'; color:#339933;">::</span><span style=" font-family:'Courier New,courier'; color:#004000;">suite</span><span style=" font-family:'Courier New,courier'; color:#009900;">())</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#b1b100;">return</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$suite</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br />А теперь представим себе набор тестов для сценария, работающего с БД. Неужели нам в каждом тесте придется подключаться к базе? Нет — не придется. Для этого можно создать свой класс унаследованный от <span style=" font-weight:600;">PHPUnit_Framework_TestSuite</span>, определить его методы <span style=" font-weight:600;">setUp()</span> и <span style=" font-weight:600;">tearDown()</span> для инициализации интерфейса БД и просто передать его в тест атрибутом <span style=" font-weight:600;">sharedFixture</span>. Базы данных мы оставим на потом, а пока попробуем создать собственный набор тестов для уже имеющегося класса.<br /><br /><span style=" color:#7f7f7f;">MyClassTest.php</span><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#3a00ff;">&lt;?php</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'PHPUnit/Framework.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'MyClass.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br /></span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">class</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MyClassTest </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">extends</span><span style=" font-family:'Courier New,courier'; color:#000000;"> PHPUnit_Framework_TestCase </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    <br />    protected </span><span style=" font-family:'Courier New,courier'; color:#000088;">$fixture</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    protected </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> setUp</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">fixture</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">=</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">sharedFixture</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    protected </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> tearDown</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">fixture</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">=</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">NULL</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#009933;">/** <br />    * @dataProvider providerPower <br />    */</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">public</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> testPower </span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000088;">$a</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$b</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$c</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">assertEquals</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000088;">$c</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">fixture</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">power</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000088;">$a</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$b</span><span style=" font-family:'Courier New,courier'; color:#009900;">))</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">public</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> providerPower</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#b1b100;">return</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#990000;">array</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />            </span><span style=" font-family:'Courier New,courier'; color:#990000;">array</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">2</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">2</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">4</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />            </span><span style=" font-family:'Courier New,courier'; color:#990000;">array</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">2</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">3</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">8</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />            </span><span style=" font-family:'Courier New,courier'; color:#990000;">array</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">3</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">5</span><span style=" font-family:'Courier New,courier'; color:#339933;">,</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">243</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#666666;">// …</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br /></span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br /><span style=" color:#7f7f7f;">MySuite.php</span><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#3a00ff;">&lt;?php</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'MyClassTest.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br /></span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">class</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MySuite </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">extends</span><span style=" font-family:'Courier New,courier'; color:#000000;"> PHPUnit_Framework_TestSuite </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    protected </span><span style=" font-family:'Courier New,courier'; color:#000088;">$sharedFixture</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">public</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#990000;">static</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> suite</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$suite</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">=</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">new</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MySuite</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'MyTests'</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$suite</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">addTestSuite</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'MyClassTest'</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#b1b100;">return</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$suite</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    protected </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> setUp</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">sharedFixture</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">=</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">new</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MyClass</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    protected </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> tearDown</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">sharedFixture</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">=</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">NULL</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br /></span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br />Здесь мы в <span style=" font-weight:600;">sharedFixture</span> положили экземпляр тестируемого класса, а в тесте просто его использовали — решение не слишком красивое (я бы даже сказал, вообще не красивое), но общее представление о наборах тестов и передаче принадлежностей между тестами оно дает. Если наглядно изобразить очередность вызова методов, то получится нечто вроде такого: <br /><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#000000;">MySuite::setUp()<br />MyClassTest::setUp()<br />MyClassTest::testPower()<br />MyClassTest::tearDown()<br />MyClassTest::setUp()<br />MyClassTest::testDivision()<br />MyClassTest::tearDown()<br />...<br />MySuite::tearDown()</span><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:xx-large; font-weight:600;">Дополнительные возможности</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Помимо всего вышеизложенного может возникнуть необходимость проверить не только расчеты и поведение сценария, но так же вывод и скорость отработки. Для этого в наше распоряжение предоставлены расширения <span style=" font-weight:600;">PHPUnit_Extensions_OutputTestCase</span> и <span style=" font-weight:600;">PHPUnit_Extensions_PerformanceTestCase</span> соответственно. Добавим в наш тестируемый класс еще один метод, и проверим правильно ли он работает.<br /><br /><span style=" color:#7f7f7f;">MyClass.php</span><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#3a00ff;">&lt;?php</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">class</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MyClass </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#666666;">// ...</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">public</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> square</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#000088;">$x</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#990000;">sleep</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">2</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#990000;">print</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$x</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">*</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$x</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br /></span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br /><span style=" color:#7f7f7f;">MyClassTest.php</span><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#3a00ff;">&lt;?php</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'PHPUnit/Framework.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'PHPUnit/Extensions/OutputTestCase.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'PHPUnit/Extensions/PerformanceTestCase.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'MyClass.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br /></span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">class</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MyClassOutputTest </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">extends</span><span style=" font-family:'Courier New,courier'; color:#000000;"> PHPUnit_Extensions_OutputTestCase </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    protected </span><span style=" font-family:'Courier New,courier'; color:#000088;">$fixture</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    protected </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> setUp</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">fixture</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">=</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">sharedFixture</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    protected </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> tearDown</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">fixture</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">=</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">NULL</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /> <br />    </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">public</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> testSquare</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">expectOutputString</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'4'</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">fixture</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">square</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">2</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br /></span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">class</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MyClassPerformanceTest </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">extends</span><span style=" font-family:'Courier New,courier'; color:#000000;"> PHPUnit_Extensions_PerformanceTestCase </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    protected </span><span style=" font-family:'Courier New,courier'; color:#000088;">$fixture</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br /><br />    protected </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> setUp</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">fixture</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">=</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">sharedFixture</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    protected </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> tearDown</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">fixture</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">=</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">NULL</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">public</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> testPerformance</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">setMaxRunningTime</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">1</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">fixture</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">square</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#cc66cc;">4</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br /></span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">class</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MyClassTest </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">extends</span><span style=" font-family:'Courier New,courier'; color:#000000;"> PHPUnit_Framework_TestCase </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br /> </span><span style=" font-family:'Courier New,courier'; color:#666666;">// …</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br /></span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br />Задать ожидаемый вывод сценария можно с помощью методов <span style=" font-weight:600;">expectOutputString()</span> или <span style=" font-weight:600;">expectOutputRegex()</span>. А для метода <span style=" font-weight:600;">setMaxRunningTime()</span> планируемое время отработки указывается в секундах. Для того, что бы эти тесты запускались вместе с уже написанными их всего лишь надо добавить к нашему набору: <br /><br /><span style=" color:#7f7f7f;">MySuite.php</span><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#3a00ff;">&lt;?php</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#b1b100;">require_once</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'MyClassTest.php'</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br /></span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">class</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MySuite </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">extends</span><span style=" font-family:'Courier New,courier'; color:#000000;"> PHPUnit_Framework_TestSuite </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    protected </span><span style=" font-family:'Courier New,courier'; color:#000088;">$sharedFixture</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">public</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#990000;">static</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">function</span><span style=" font-family:'Courier New,courier'; color:#000000;"> suite</span><span style=" font-family:'Courier New,courier'; color:#009900;">()</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$suite</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#339933;">=</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#3a00ff;">new</span><span style=" font-family:'Courier New,courier'; color:#000000;"> MySuite</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'MyTests'</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$suite</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">addTestSuite</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'MyClassTest'</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$suite</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">addTestSuite</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'MyClassOutputTest'</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />        </span><span style=" font-family:'Courier New,courier'; color:#000088;">$suite</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">addTestSuite</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'MyClassPerformanceTest'</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />        </span><span style=" font-family:'Courier New,courier'; color:#b1b100;">return</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#000088;">$suite</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"> <br />    </span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /><br />    </span><span style=" font-family:'Courier New,courier'; color:#666666;">// ...</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    <br /></span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:xx-large; font-weight:600;">Пропускаем тесты</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />И напоследок рассмотрим ситуацию, в которой некоторые тесты необходимо пропускать по каким либо причинам. К примеру в том случае, когда на тестируемой машине отсутствует какое-либо расширение PHP, можно убедившись в его отсутствии пометить тест, как пропущенный добавив к его коду следующее: <br /><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#b1b100;">if</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#339933;">!</span><span style=" font-family:'Courier New,courier'; color:#990000;">extension_loaded</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'someExtension'</span><span style=" font-family:'Courier New,courier'; color:#009900;">))</span><span style=" font-family:'Courier New,courier'; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; color:#009900;">{</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br />    </span><span style=" font-family:'Courier New,courier'; color:#000088;">$this</span><span style=" font-family:'Courier New,courier'; color:#339933;">-&gt;</span><span style=" font-family:'Courier New,courier'; color:#004000;">markTestSkipped</span><span style=" font-family:'Courier New,courier'; color:#009900;">(</span><span style=" font-family:'Courier New,courier'; color:#0000ff;">'Extension is not loaded.'</span><span style=" font-family:'Courier New,courier'; color:#009900;">)</span><span style=" font-family:'Courier New,courier'; color:#339933;">;</span><span style=" font-family:'Courier New,courier'; color:#000000;"><br /></span><span style=" font-family:'Courier New,courier'; color:#009900;">}</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br />Либо в том случае, когда тест написан для кода, которого еще нет в сценарии (не редкая для TDD ситуация) его можно пометить как не реализованный с помощью метода <span style=" font-weight:600;">markTestIncomplete()</span><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><span style=" font-size:xx-large; font-weight:600;">Напоследок</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Наверное, на этом пока можно остановиться. Тема модульного тестирования данной статьей далеко не завершена — осталось еще использование mock-объектов, тестирование работы с БД, анализ покрытия кода и многое другое. Но надеюсь, что поставленная цель — ознакомить начинающих с базовыми возможностями PHPUnit и подтолкнуть к использованию юнит-тестов, как одному из средств для достижения большей эффективности — была достигнута. <br />Удачи вам, и стабильных приложений.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>