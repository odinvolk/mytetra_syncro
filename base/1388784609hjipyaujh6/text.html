<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Не так давно стал обладателем сего девайса - <span style=" font-weight:600;">Samsung Galaxy Tab 10.1</span>. Рассказывать про впечатления от приобретения, плюсы и минусы планшета я не буду, скажу лишь, что доволен.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Все бы хорошо, но надоумился Google в Android 3.0+ убрать возможность подключения устройства как USB накопителя (USB Mass Storage). Да и Samsung показал себя не с лучшей стороны, не допилив USB Mass Storage, как это делают другие производители, например Acer. Вместо этого в операционную систему всунули гнусный майкрософтовский <a href="http://ru.wikipedia.org/wiki/Media_Transfer_Protocol"><span style=" text-decoration: underline; color:#0057ae;">MTP (Media Transfer Protocol)</span></a>. У которого помимо прочих <a href="http://ru.wikipedia.org/wiki/Media_Transfer_Protocol#.D0.9D.D0.B5.D0.B4.D0.BE.D1.81.D1.82.D0.B0.D1.82.D0.BA.D0.B8"><span style=" text-decoration: underline; color:#0057ae;">минусов</span></a>, есть очень большой недостаток - сырая реализация под Linux. Ну по крайней мере подружить свою убунту и планшет через него мне так и не удалось. Поэтому я расскажу об альтернативном способе обмена файлами между Android устройством и устройством с ОС Linux. В данном случае Samsung Galaxy Tab 10.1 с <span style=" font-weight:600;">Android 3.2</span> на борту и моя любимая<span style=" font-weight:600;"> Ubuntu 11.10</span> :)<br />Кстати, этот способ также подойдет и для Mac OS юзеров.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сразу после обнаружения этой &quot;фичи&quot; я полез искать способ подключения к ПК. Пытался сначала все же задействовать этот MTP, но все безуспешно. <br />После этого начал искать альтернативу. Нашел очень интересный способ - использовать стандартную утилиту ADB из Android SDK. Она представляет собой отладочный протокол (мост) для обмена данными между ПК и Андроид устройством. Помимо этого имеется возможность обмениваться файлами, просматривать дерево каталогов и файлов, создавать директории, что нам как раз и требуется.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Так как утилита консольная, то для удобства использования нам потребуется графический интерфейс. Хоть выбор и не велик, но для себя я выбрал программку на Python - <a href="https://github.com/sole/aafm"><span style=" text-decoration: underline; color:#0057ae;">AAFM (Android ADB File Manager)</span></a>. Описание, установка и способ использования есть на официальной страничке, но я все же напишу краткий мануал на русском языке.</p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:large; font-weight:600;">Требования</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">- Python с бибилиотеками PyGTK<br />- GTK<br />- git<br />- Android SDK<br /><br />Для Ubuntu нам понадобится только git и Android SDK.</p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:large; font-weight:600;">Устанавливаем git и копируем репозиторий</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">sudo apt-get install git</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">git clone git://github.com/sole/aafm.git ~/Applications/aafm</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:large; font-weight:600;">Устанавливаем Android SDK</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">sudo apt-get install ia32-libs</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Скачиваем SDK отсюда - <a href="http://developer.android.com/sdk/index.html"><span style=" text-decoration: underline; color:#0057ae;">http://developer.android.com/sdk/index.html</span></a>. Распаковываем в директорию ~/Applications/android-sdk и выполняем следующие команды в консоли:</p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">sudo cp ~/Applications/android-sdk/platform-tools/adb /usr/bin/adb</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">sudo cp ~/Applications/android-sdk/platform-tools/aapt /usr/bin/aapt</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:large; font-weight:600;">Настраиваем udev</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">sudo gedit /etc/udev/rules.d/51-android.rules</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;"># Samsung</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">SUBSYSTEM==&quot;usb&quot;, SYSFS{idVendor}==&quot;04e8&quot;, MODE=&quot;0777&quot;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтобы узнать idVendor нужно выполнить в консоле команду lsusb и найти там свое устройство. Список будет примерно такой:</p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">Bus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">Bus 005 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">Bus 006 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">Bus 001 Device 002: ID 064e:a103 Suyin Corp. Acer/HP Integrated Webcam [CN0314]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">Bus 002 Device 002: ID 0bda:0158 Realtek Semiconductor Corp. USB 2.0 multicard reader</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">Bus 006 Device 002: ID 147e:1000 Upek Biometric Touchchip/Touchstrip Fingerprint Sensor</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">Bus 001 Device 005: ID 04e8:6860 Samsung Electronics Co., Ltd </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">По последней строчке можно понять, откуда берется idVendor: </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">Bus 001 Device 005: ID 04e8:6860 Samsung Electronics Co., Ltd </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Редактируем idVendor, если требуется и сохраняем файл.<br />Выставляем права и перезапускаем udev:</p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">chmod a+r /etc/udev/rules.d/51-android.rules</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">sudo /etc/init.d/udev restart</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:large; font-weight:600;">Настраиваем устройство</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Теперь нужно включить на Android устройстве режим отладки: <span style=" font-weight:600;"><br />Настройки -&gt; Приложения -&gt; Разработка -&gt; Отладка по USB</span>.</p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:large; font-weight:600;">Запускаем AAFM</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Подключаем телефон/планшет через USB шнур и выполняем следующие команды:</p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">cd ~/Applications/aafm/src</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">chmod +x ./aafm-gui.py</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">python ./aafm-gui.py</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">После этого должно открыться окно такого вида:</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1561367474.png" /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для себя я сделал кнопку запуска, привязал к ней иконку и добавил на панель Unity.<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Процесс настройки конечно кропотливый, но на самом деле не такой сложный как кажется и займет не больше получаса вашего свободного времени. Зато результат будет оправдан :)</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">P.S. </span>Графический интерфейс программы подвисает при передаче больших файлов. На самом деле это не значит, что файл не перадается. Это как раз показатель обратного - передача идет успешно, поэтому не спешите закрывать окно, дождитесь пока она отвиснет. Видимо это связано с тем, что разработчик решил не выносить передачу файлов в отдельный поток. Надеюсь в следующей версии они это исправят.</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>