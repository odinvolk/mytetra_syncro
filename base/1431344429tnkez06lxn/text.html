<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Полноценная среда разработки GUI должна иметь в своем составе средства графического представления информации с развитым интерфейсом пользователя. В Delphi и C++Builder эту роль выполняет компонент TChart. Дополнением к библиотеке Qt, предоставляющим возможность отображать данные в графическом виде, является библиотека Qwt. Рассмотрим процесс ее установки.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Windows</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для сборки библиотеки Qwt потребуется MSYS с дополнительной утилитой patch, он устанавливается вместе с MinGW 4.6 (см. <a href="http://qtlinux.narod.ru/install_mingw.htm"><span style=" text-decoration: underline; color:#0057ae;">здесь</span></a>). Кроме того, следует определиться с какими инструментами (подробности в <a href="http://qtlinux.narod.ru/dev_tools.htm"><span style=" text-decoration: underline; color:#0057ae;">статье</span></a>) будет использоваться устанавливаемая библиотека, именно с этой связкой ее необходимо и собирать. Здесь возможны два варианта</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">– Qt 4 и MinGW 4.6<br />– Qt 5 и MinGW 4.7 </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Поскольку библиотека Qwt не использует OpenGL, совершенно не важно с какой опцией сконфигурирована Qt 5 -opengl es2 -angle или -opengl desktop. Для разнообразия далее будем полагать, что используется SDK, установленный в папку по умолчанию C:\Qt\Qt5.0.1, в котором, как известно, Qt 5 сконфигурирована с опцией -opengl es2 -angle, а MinGW 4.7 установлен вместе с библиотекой в папку C:\Qt\Qt5.0.1\Tools\MinGW.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Заранее договоримся, что непосредственно файлы библиотеки Qwt будут собираться в обеих конфигурациях – релизной и отладочной, плагин для дизайнера форм – в релизной конфигурации (плагин, собранный в отладочной конфигурации, дизайнер не воспринимает). Примеры использования виджетов, поставляемые с библиотекой Qwt, будут собираться только с Qt 4 (в качестве демонстрации – в отладочной конфигурации), а с Qt 5 для сокращения количества правок исходного кода – не будут.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Разработчиком распространяется две ветки библиотеки Qwt – 5.x.x и 6.x.x. Первая, на мой взгряд, меньше тормозит, а вторая в целом работает корректнее, в особенности это проявляется при использовании Qt 5. Но &quot;на вкус и цвет&quot;, как говорится, ... Установка этих версий мало чем отличается друг от друга, но во избежание лишнего &quot;похудения мозга&quot; инструкции для каждой из них даются отдельно. В Windows могут быть установлены сразу обе ветки библиотеки. Переключение между ними осуществляется путем изменения пути к библиотеке в переменной среды Path и именения описания библиотеки в файле проекта.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#000000;">Версия 5.x.x </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Замечание.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Выполнение пункта 7 гарантирует доступность виджетов библиотеки Qwt только в дизайнере форм, поставляемом с библиотекой Qt (см. группу ярлыков библиотеки Qt в меню Пуск), на панели инструментов должна появиться группа виджетов, изображенная на рисунке</p>
<p align="center" style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1726687362.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если же открыть какую-либо форму дизайнером, интегрированным в Qt Creator, то данная группа виджетов на панели инструментов отсутствует. Эта проблема обсуждается на форумах, например, <a href="http://www.forum.crossplatform.ru/index.php?s=4d6e1b8609bd788f9d992f5002a45758&amp;showtopic=2264&amp;pid=28513&amp;mode=threaded&amp;start=#entry28513"><span style=" text-decoration: underline; color:#0057ae;">здесь</span></a>. Причиной называют то, что Qt Creator, поставляемый в инсталяционных файлах, собран с помощью Microsoft Visual C++, и плагины, собранные с помощью MinGW, он не понимает. Все встанет на свои места, если пересобрать Qt Creator из исходников, о том как это сделать читайте в посвященной этому вопросу <a href="http://qtlinux.narod.ru/make_qtcreator.htm"><span style=" text-decoration: underline; color:#0057ae;">статье</span></a>. Дополнительную информацию о настройке плагина Qwt смотрите <a href="http://qtlinux.narod.ru/qwt_plugin.htm"><span style=" text-decoration: underline; color:#0057ae;">здесь</span></a>.</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#000000;">Версия 6.x.x </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1. Скачиваем с <a href="http://sourceforge.net/projects/qwt/files/qwt/"><span style=" text-decoration: underline; color:#0057ae;">сайта разработчика</span></a> архив</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">qwt-6.0.2.zip<br />(версия на момент написания статьи)</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">распаковываем его в какую либо временную папку, например, в D:\TEMP.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">2. Скачиваем патч</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://qtlinux.narod.ru/files/qwt6_qt4_patch.zip"><span style=" text-decoration: underline; color:#0057ae;">qwt6_qt4_patch.zip</span></a>   для сборки с Qt 4 или<br /><a href="http://qtlinux.narod.ru/files/qwt6_qt5_patch.zip"><span style=" text-decoration: underline; color:#0057ae;">qwt6_qt5_patch.zip</span></a>   для сборки с Qt 5</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">распаковываем его в папку D:\TEMP\qwt-6.0.2.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">3. Запускаем MinGW Shell (см. группу ярлыков MinGW в меню Пуск или файл C:\Qt\mingw-4.6\msys\1.0\msys.bat) и вводим команды</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">cd /d/TEMP/qwt-6.0.2<br />patch -Np1 -i qwt6_qt4.patch   для сборки с Qt 4 или<br />patch -Np1 -i qwt6_qt5.patch   для сборки с Qt 5</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">4. Правим файл D:\TEMP\qwt-6.0.2\qwtconfig.pri</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">– прописываем свой каталог установки, например</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">QWT_INSTALL_PREFIX = C:/Qt/qwt-$$QWT_VERSION</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">– если нет желания собирать примеры с Qt 4, комментируем строку &quot;CONFIG += QwtExamples&quot;.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">5. Запускаем Qt 4.8.4 Command Prompt (см. группу ярлыков библиотеки Qt в меню Пуск) или Qt 5.0.1 for Desktop (MinGW 4.7). Переходим в каталог, содержащий распакованную библиотеку</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">cd /D D:\TEMP\qwt-6.0.2</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">и вводим команды</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">qmake qwt.pro -r -spec win32-g++<br />mingw32-make<br />mingw32-make install</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сборка выполнится быстрей, если применяется распараллеливание компиляции (см. соответствующие статьи <a href="http://qtlinux.narod.ru/parallel_make.htm"><span style=" text-decoration: underline; color:#0057ae;">здесь</span></a> или <a href="http://qtlinux.narod.ru/parallel_for_qt5.htm"><span style=" text-decoration: underline; color:#0057ae;">здесь</span></a>). По окончании сборки и копирования файлов в каталоге C:\Qt должна появиться папка qwt-6.0.2.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">6. Прописываем в переменную среды Path путь</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">C:\Qt\qwt-6.0.2\lib</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Windows XP:   Мой компьютер &gt; Свойства &gt; Дополнительно &gt; Переменные среды &gt; Path &gt; Изменить<br />Windows 7:   Мой компьютер &gt; Свойства &gt; Дополнительные параметры системы &gt; Переменные среды &gt; Системные переменные &gt; Path &gt; Изменить</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">7. Для того, чтобы виджеты установленной библиотеки были доступны в дизайнере форм, копируем содержимое папки D:\TEMP\qwt-6.0.2\designer\plugins\designer в папку C:\Qt\qt-4.8.4\plugins\designer или, соответственно, в папку C:\Qt5.0.1\5.0.1\mingw47_32\plugins\designer.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">На этом установка завершена.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Замечание.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Выполнение пункта 7 гарантирует доступность виджетов библиотеки Qwt только в дизайнере форм, поставляемом с библиотекой Qt (см. группу ярлыков библиотеки Qt в меню Пуск), на панели инструментов должна появиться группа виджетов, изображенная на рисунке</p>
<p align="center" style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image711852425.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если же открыть какую-либо форму дизайнером, интегрированным в Qt Creator, то данная группа виджетов на панели инструментов отсутствует. Эта проблема обсуждается на форумах, например, <a href="http://www.forum.crossplatform.ru/index.php?s=4d6e1b8609bd788f9d992f5002a45758&amp;showtopic=2264&amp;pid=28513&amp;mode=threaded&amp;start=#entry28513"><span style=" text-decoration: underline; color:#0057ae;">здесь</span></a>. Причиной называют то, что Qt Creator, поставляемый в инсталяционных файлах, собран с помощью Microsoft Visual C++, и плагины, собранные с помощью MinGW, он не понимает. Все встанет на свои места, если пересобрать Qt Creator из исходников, о том как это сделать читайте в посвященной этому вопросу <a href="http://qtlinux.narod.ru/make_qtcreator.htm"><span style=" text-decoration: underline; color:#0057ae;">статье</span></a>. Дополнительную информацию о настройке плагина Qwt смотрите <a href="http://qtlinux.narod.ru/qwt_plugin.htm"><span style=" text-decoration: underline; color:#0057ae;">здесь</span></a>.</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p></body></html>