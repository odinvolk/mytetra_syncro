<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Читаем текст по ссылке: </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">http://www.pclinuxos.com/forum/index.php?topic=87138.0 </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">(можно по ходу записи пару раз остановить запустить проигрывание потока в браузере)</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В результате получаем команду вида: </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">rtmpdump -r rtmp://109.239.130.240:1935/unost/_definst_/unost -o out.flv</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">или, что более интересно: </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">rtmpdump -r rtmp://109.239.130.240:1935/unost/_definst_/unost 2&gt;/dev/null | mplayer -</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">По факту, нормально работает такая команда:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">rtmpdump --live -r rtmp://109.239.130.240:1935/unost/_definst_/unost -v 2&gt;/dev/null | mplayer -cache 1024 -cache-min 90 -speed 0.97 -</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Объяснение на английском:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">How to record (capture) with rtmpdump.<br /><br /><br />For example I want to record (capture) <span style=" font-weight:600;">live broadcast of tv</span>:<br /><a href="http://rt.com/on-air/"><span style=" text-decoration: underline; color:#0057ae;">http://rt.com/on-air/</span></a><br /><br />I run:<br />tcpdump -ieth0 -nn -A | grep -e&quot;rtmp&quot; -e&quot;connect&quot; -e&quot;play&quot; &gt; rt.txt<br /><br />Sometime it's useful to add -e&quot;app&quot; option in grep in spite of it can capture a lot of garbage.<br /><br />I open this page, waiting broadcasting and 3-4 times reload page again to fill buffer of output file (rt.txt in this case).<br />I always capture packets in file (sometimes output on consile may be wrong or not full).<br /><br />Next I open rt.txt and looking for piece of text like this:<br /><br />connect.?..........app...live..flashVer...LNX 10,1,82,76..swfUrl..'<a href="http://rt.com/s/swf/player5.4."><span style=" text-decoration: underline; color:#0057ae;">http://rt.com/s/swf/player5.4.</span></a><br />viral.swf..tcUrl...rtmp://fm.s5.visionip.tv/live..fpad....capabilities.@m........audioCodecs.@.........videoCodecs.@o.......<br />videoFunction.?.........pageUrl....<a href="http://rt.com/on-air/..objectEncoding..........."><span style=" text-decoration: underline; color:#0057ae;">http://rt.com/on-air/..objectEncoding...........</span></a><br />.....T93.../...........play.............RT_3<br /><br />and build command in accordance with this manual:<br /><a href="http://rtmpdump.mplayerhq.hu/rtmpdump.1.html"><span style=" text-decoration: underline; color:#0057ae;">http://rtmpdump.mplayerhq.hu/rtmpdump.1.html</span></a><br /><br />You should be careful with dots in options (turn on your brain and use cut and try method) like in this example:<br />rtmp://<span style=" color:#ff0000;">fm.s5</span>.visionip.tv   should be   rtmp://<span style=" color:#ff0000;">fms5</span>.visionip.tv<br /><br />Here is example of 60 sec record:<br /><br />rtmpdump -r rtmp://fms5.visionip.tv/live \<br />-a live \<br />-y RT_3 \<br />-W <a href="http://rt.com/s/swf/player5.4.viral.swf"><span style=" text-decoration: underline; color:#0057ae;">http://rt.com/s/swf/player5.4.viral.swf</span></a> \<br />-p <a href="http://rt.com/on-air/"><span style=" text-decoration: underline; color:#0057ae;">http://rt.com/on-air/</span></a> \<br />-f &quot;LNX 10,1,82,76&quot; \<br />-o ~/russia_tooday.flv \<br />-B 60<br /><br />The simple command:<br /><br />rtmpdump -r rtmp://fms5.visionip.tv/live \<br />-y RT_3 \<br />-o ~/russia_tooday.flv \<br />-B 60<br /><br />also works but they recommend to use full syntax.<br /><br /><br /><span style=" font-weight:600;">Blumberg TV</span><br /><a href="http://www.bloomberg.com/tv/"><span style=" text-decoration: underline; color:#0057ae;">http://www.bloomberg.com/tv/</span></a><br /><br />connect.?..........app...live..flashVer...LNX 10,1,82,76..swfUrl..Jhttp://cdn.<br />gotraffic.net/v/20110210_153738//flash/Bloomber.gMediaPlayer.swf..tcUrl..*rtmpt://cp87869.live.edgefcs.net:1935/live..fpad....capabilities.@m......<br />..audioCodecs.@.........video.Codecs.@o.......<br />videoFunction.?.........pageUrl...<a href="http://www.bloomberg.com/tv/..objectEncoding.@........."><span style=" text-decoration: underline; color:#0057ae;">http://www.bloomberg.com/tv/..objectEncoding.@.........</span></a><br /><br />play.............us_300@21006<br /><br />rtmpdump -r rtmpt://cp87869.live.edgefcs.net:1935/live \<br />-a live \<br />-y us_300@21006 \<br />-W <a href="http://cdn.gotraffic.net/v/20110210_153738//flash/BloombergMediaPlayer.swf"><span style=" text-decoration: underline; color:#0057ae;">http://cdn.gotraffic.net/v/20110210_153738//flash/BloombergMediaPlayer.swf</span></a> \<br />-p <a href="http://www.bloomberg.com/tv/"><span style=" text-decoration: underline; color:#0057ae;">http://www.bloomberg.com/tv/</span></a> \<br />-f &quot;LNX 10,1,82,76&quot; \<br />-o ~/bloomberg.flv \<br />-B 60 \<br />--live<br /><br /><br /><span style=" font-weight:600;">Video on demand</span>:<br />Deutsche Welle<br /><a href="http://www.dw-world.de/dw/0,,4756,00.html"><span style=" text-decoration: underline; color:#0057ae;">http://www.dw-world.de/dw/0,,4756,00.html</span></a><br /><br />Program Euromaxx (with Roxette):<br /><br />connect.?..........app..<br />a4337/dwwod1/..flashVer...LNX 10,1,82,76..swfUrl..;<a href="http://mediacenter.dw-world.de/player/flash/media.player.swf..tcUrl.."><span style=" text-decoration: underline; color:#0057ae;">http://mediacenter.dw-world.de/player/flash/media.player.swf..tcUrl..</span></a>*rtmpt://tvone.fcod.llnwd.net/a433<br />7/dwwod1/..fpad....capabilities.@m........audioCodecs.@.........videoCodecs..@o.......<br />videoFunction.?.........pageUrl..Khttp://mediacenter.dw-world.de/english/video/#!/72620/euromaxx/Program=7555..object.Encoding.@.........<br />................closeStream.....................H.....P.....play............;mp4:dwtv_video/flv/eme/emagen090211-euromaxx01ep_sd_avc.mp4<br /><br />rtmpdump -r rtmpt://tvone.fcod.llnwd.net/a4337/dwwod1/ \<br />-a a4337/dwwod1/ \<br />-y mp4:dwtv_video/flv/eme/emagen090211-euromaxx01ep_sd_avc.mp4 \<br />-W <a href="http://mediacenter.dw-world.de/player/flash/media.player.swf"><span style=" text-decoration: underline; color:#0057ae;">http://mediacenter.dw-world.de/player/flash/media.player.swf</span></a> \<br />-p rtmpt://tvone.fcod.llnwd.net/a4337/dwwod1/ \<br />-f &quot;LNX 10,1,82,76&quot; \<br />-o ~/euromaxx.flv<br /><br /><br />P.S. Some servers do not talk on this language and it's hard to get options for rtmpdump in such a way.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p></body></html>