<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Многие из тех кто интересовался темой наверно потратили кучу времени для создания и\или поиски алгоритма кодирования русского текста - <span style=" font-weight:600;">ucs2.</span><br /><br />Вот функция на <span style=" font-weight:600;">Delphi</span> которая это делает легко и быстро:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="QUOTE"></a><span style=" font-family:'Courier New'; color:#6a1009;">f</span><span style=" font-family:'Courier New'; color:#6a1009;">unction ucs2(s: string): string;<br />var i,k: integer;<br />begin<br />for i:=1 to length(s) do begin<br />  k:= ord(s[i]);<br />  if k&gt;=192 then k:= k + 1040 - 192;<br />  result:= result + inttohex(k,4)<br />end<br />end;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Функции отправляем текст на русском языке, на выходе получаем текст в нужной кодировке. Максимальная длина входного текста 70 символов.<br /><br /><br />Если вам по каким-то причинам нужно в одном смс отправлять более 70 символов, то можно воспользоваться вот этой функцией, она понимает текст <span style=" font-weight:600;">только на латинице</span>, но может содержать до 140 символов.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a1009;">function TFormComPort.Encode7bit(Src:String):String;<br />var Dst:String;<br />    i:Integer;<br />    CurS,NextS:Byte;<br />    TStr:String;<br />begin<br />  for i:=1 to Length(Src) do begin<br />    if (i mod 8)=0 then Continue;<br />    TStr:=Copy(Src,i,1);<br />    CurS:=Ord(TStr[1]);<br />    if (i mod 8)&gt;1 then<br />      CurS:=(CurS shr ((i mod 8)-1) );<br />    if i&lt;Length(Src) then begin<br />      TStr:=Copy(Src,i+1,1);<br />      NextS:=Ord(TStr[1]);<br />    end else<br />      NextS:=0;<br />    NextS:=(NextS shl (8-(i mod 8)));<br />    Dst:=Dst+IntToHex(CurS+NextS,2);<br />  end;<br />  Result:=Dst;<br />end;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>