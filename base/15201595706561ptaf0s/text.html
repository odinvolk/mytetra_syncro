<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="blog_title"></a>LibraryCollector- программа для сборки библиотек для переноса Qt-приложений</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">Запись от Avazart размещена 15.06.2014 в 15:13 </span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"><br /></span></p>
<hr />
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="blog_message"></a><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-style:italic; color:#000000;">(</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-style:italic; color:#000000;">альтернатива </span><a href="http://doc.qt.io/qt-5/windows-deployment.html"><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-style:italic; text-decoration: underline; color:#0000ff;">windeployqt</span></a><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-style:italic; color:#000000;"> )</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"><br /><br />Программа LibraryCollector предназначена для </span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-weight:600; color:#000000;">получения списка зависимостей</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;">.<br />Под зависимостями имеются ввиду </span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-weight:600; color:#000000;">динамические библиотеки</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"> *.dll/*.so модули и плагины Qt используемые программой. LibraryCollector позволяет выполнить </span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-weight:600; color:#000000;">автоматическое копирование</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"> этих зависимостей/библиотек в указанную папку для последующего переноса программы на другой компьютер где не установлен Qt или последующего создания из них инсталятора. При копировании LibraryCollector </span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-weight:600; color:#000000;">учитывает иерархию папок</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"> расположения </span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-weight:600; color:#000000;">плагинов</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"> Qt.<br /><br />LibraryCollector </span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-weight:600; color:#000000;">ищет</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"> зависимости процесса программы </span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-weight:600; color:#000000;">в рантайме</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;">, т.е для получения зависимостей нужно запустить вашу программу из QtCreator и &quot;натравить&quot; на нее LibraryCollector. Если ваша программа использует </span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-weight:600; color:#000000;">плагины</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"> и/или </span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-weight:600; color:#000000;">qml</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;">, то на момент получения зависимостей </span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-style:italic; color:#000000;">(кнопка &quot;Update&quot;)</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;">- в вашей программе они </span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-weight:600; color:#000000;">уже должны быть подгружены</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;">. Поэтому для того что бы получить полный список зависимостей</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-style:italic; color:#000000;">(со всеми плагинами и qml)</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"> нужно сначала </span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-weight:600; color:#000000;">прогнать вашу программу по всему функционалу</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;">, а потом нажать кнопку &quot;Update&quot;.<br /><br /></span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-style:italic; color:#000000;">Примечание: Обычно плагины подгружаются при первом задействовании ф-ций которые их используют, например плагин sqlite при первом обращении к базе данных. </span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"><br /><br />Для работы LibraryCollector необходимо указать путь к вашей программе, это можно сделать явно указав в поле &quot;name&quot; путь либо используя &quot;прицел&quot; кнопку &quot;+&quot; напротив поля &quot;name&quot; указав на окно вашей программы.<br /><br />Так же необходимо указать пути к папкам Qt где лежать библиотеки и плагины, что бы LibraryCollector знал откуда именно брать библиотеки и автоматически их отобразил в отдельной ветке дерева зависимостей.<br /><br />В поле &quot;to&quot; указывается папка куда копировать программу и библиотеки.<br />В этом поле с помощью регулярки подменяются:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:medium;">&lt;ExeDir&gt; - на путь к папке где лежит исполняемый файл программы</span></li>
<li style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:medium;">&lt;BaseName&gt; - на имя исполняемого файла без расширения.</span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"><br />LibraryCollector можно настроить на запуск из QtCreator с автоматическим &quot;подхватыванием&quot; путей из окружения QtCreator.<br /><br /></span></p>
<p style=" margin-top:5px; margin-bottom:0px; margin-left:36px; margin-right:10px; -qt-block-indent:0; text-indent:0px; line-height:15px; background-color:#e9e9e6;"><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:8.25pt; font-weight:600; color:#000000;">Настройка QtCreator (картинка недоступна)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:12px; font-style:italic; color:#000000;">Примечание:</span><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:12px; color:#000000; background-color:#f5f5f5;"> На картинке указано старое название программы.</span><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:12px; color:#000000;"> </span><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:12px; color:#000000; background-color:#f5f5f5;">В указанные поля нужно ввести:</span><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:12px; color:#000000;"> </span><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:12px; font-weight:600; color:#000000;">Программа:</span><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:12px; color:#000000; background-color:#f5f5f5;"> - полный путь к LibraryCollector.exe</span><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:12px; color:#000000;"> </span><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:12px; font-weight:600; color:#000000;">Параметры:</span><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:12px; color:#000000; background-color:#f5f5f5;"> - строку из параметров:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:12px; font-weight:600; color:#000000;">%{CurrentProject:BuildPath} %{CurrentBuild:Name} %{CurrentProject:FileBaseName} %{CurrentProject:QT_HOST_BINS}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:12px; color:#000000; background-color:#f5f5f5;">Из первых трех переменных/параметров склеивается путь к экзешнику собираемого проекта, четвертый параметр передает путь папке bin.</span><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:12px; color:#000000;"> </span><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:12px; color:#000000; background-color:#f5f5f5;">Путь к папке plugins вычисляется на основе предположения что plugins расположена в той же папке что и bin</span><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:12px; color:#000000;"> </span><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:12px; color:#000000; background-color:#f5f5f5;">Рабочий каталог: - полный путь к каталогу в котором лежит LibraryCollector.exe</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"><br />Во вложениях прикреплены уже собранная </span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-style:italic; color:#000000;">(статически, под x32)</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"> программа, эта программа сможет работать только для x32 сборки Qt. </span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-weight:600; color:#000000;">Для работы с x64 нужно пересобирать LibraryCollector из исходников</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;">, исходники выложены на github и будут обновляться.<br /><br /></span></p>
<p style=" margin-top:5px; margin-bottom:0px; margin-left:0px; margin-right:10px; -qt-block-indent:0; text-indent:0px; line-height:15px; background-color:#e9e9e6;"><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:8.25pt; font-weight:600; color:#000000;">Видео демонстрация работы в Windows</span></p>
<p style=" margin-top:5px; margin-bottom:0px; margin-left:0px; margin-right:10px; -qt-block-indent:0; text-indent:0px; line-height:15px; background-color:#e9e9e6;"><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:8.25pt; font-weight:600; color:#000000;">https://www.youtube.com/watch?v=wnYEdi4799g&amp;feature=youtu.be</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"><br /><br /></span>Просьба отписываться в комментариях при обнаружении ошибок или возникновении пожеланий по улучшению программы/исходного кода<span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"><br /><br />Альтернативный вариант реализации программы от </span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-weight:600; color:#000000;">CriDos</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"> </span><a href="https://github.com/CriDos/DLLCollector_recode"><span style=" font-family:'Times New Roman'; font-size:8.25pt; text-decoration: underline; color:#0000ff;">https://github.com/CriDos/DLLCollector_recode</span></a><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"><br /><br /></span></p>
<p style=" margin-top:5px; margin-bottom:0px; margin-left:36px; margin-right:10px; -qt-block-indent:0; text-indent:0px; line-height:15px; background-color:#e9e9e6;"><span style=" font-family:'Verdana,Arial,sans-serif'; font-size:8.25pt; font-weight:600; color:#000000;">История правок</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"><br /><br /></span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-weight:600; color:#000000;">Блоги:</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"><br /><br /></span><a href="http://www.cyberforum.ru/qt/thread1851009.html"><span style=" font-family:'Times New Roman'; font-size:8.25pt; text-decoration: underline; color:#0000ff;">Деплой Qt5 приложений в Windows. Скандалы, интриги, расследования. </span></a><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"><br /><br /></span><a href="http://www.cyberforum.ru/qt/thread798089-page3.html"><span style=" font-family:'Times New Roman'; font-size:8.25pt; text-decoration: underline; color:#0000ff;">Qt5 Перенос приложения на другой компьютер</span></a><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"><br /><br /></span><a href="http://www.cyberforum.ru/cpp-linux/thread1426785.html"><span style=" font-family:'Times New Roman'; font-size:8.25pt; text-decoration: underline; color:#0000ff;">Получить список загруженных библиотек конкретного процесса</span></a><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"><br /><br /><br /></span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-weight:600; color:#000000;">Исходники</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;">: </span><a href="https://github.com/Avazart/LibraryCollector"><span style=" font-family:'Times New Roman'; font-size:8.25pt; text-decoration: underline; color:#0000ff;">https://github.com/Avazart/LibraryCollector</span></a><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"><br /></span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-weight:600; color:#000000;">Программа</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"> </span><span style=" font-family:'Times New Roman'; font-size:8.25pt; font-style:italic; color:#000000;">(статическая сборка под win x32)</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"> :</span></p>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="attachmentlist"></a><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;">В</span><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;">ложения</span></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="3" cellpadding="0">
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image11872.png" /></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.cyberforum.ru/blog_attachment.php?attachmentid=3974&amp;d=1474389186"><span style=" font-family:'Times New Roman'; font-size:8.25pt; text-decoration: underline; color:#0000ff;">LibraryCollector.zip</span></a><span style=" font-family:'Times New Roman'; font-size:8.25pt; color:#000000;"> (3.88 Мб, 169 просмотров)</span></p></td></tr></table></body></html>