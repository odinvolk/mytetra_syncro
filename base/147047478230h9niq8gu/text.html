<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'Arial'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В NetBeans 8.0.2 есть проблема.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Предположим, нужно создать проект с удаленными исходниками - то есть, когда исходники лежат на удаленном сервере. Это обычно необходимо, если пользователь хочет сделать отладку по xdebug.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Пользователь нажимает Файл - Создать проект - Приложение PHP с удаленного сервера. И на этапе настройки удаленного подключения по SFTP (по сути, это SSH), при нажатии &quot;Проверить подключение&quot;, даже если правильно введен хост, логин, и пароль, то будет ошибка:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image31148.png" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:8pt; font-style:italic;">Не удалось подключиться к серверу anysite.ru</span></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:8pt; font-style:italic;">(Причина: Algorithm negotiation fail)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В логе протокола соединения (NetBeans его показывает внизу), будут примерно такие строки:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a1009;">Connecting to webhamster.ru port 22</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a1009;">Connection established</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-weight:600; color:#6a1009;">Remote version string: SSH-2.0-OpenSSH_6.7p1 Debian-5+deb8u1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-weight:600; color:#6a1009;">Local version string: SSH-2.0-JSCH-0.1.49</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a1009;">CheckCiphers: aes256-ctr,aes192-ctr,aes128-ctr,aes256-cbc,aes192-cbc,aes128-cbc,3des-ctr,arcfour,arcfour128,arcfour256</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a1009;">aes256-ctr is not available.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a1009;">aes192-ctr is not available.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a1009;">aes256-cbc is not available.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a1009;">aes192-cbc is not available.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a1009;">arcfour256 is not available.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a1009;">CheckKexes: diffie-hellman-group14-sha1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a1009;">diffie-hellman-group14-sha1 is not available.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Это значит, что на удаленном сервере и локально на компьютере пользователя используются разные реализации SSH (что не удивительно), и они друг с другом не совместимы. Об этом с матами написано даже в багтрекере NetBeans:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://netbeans.org/bugzilla/show_bug.cgi?id=251641"><span style=" text-decoration: underline; color:#0000ff;">https://netbeans.org/bugzilla/show_bug.cgi?id=251641</span></a></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Вот какое решение предлагают в англонете:</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.svrnm.de/blog/fixed-netbeans-phpstorm-algorithm-negotiation-fail/"><span style=" text-decoration: underline; color:#0000ff;">http://www.svrnm.de/blog/fixed-netbeans-phpstorm-algorithm-negotiation-fail/</span></a></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">Кратко, там написано следующее:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><a name="tldr"></a><span style=" font-weight:600;"><br /></span><span style=" font-weight:600;">Both, NetBeans and PhpStorm, are including JSch as an external library. You can exchange the file using a </span><a href="http://www.svrnm.de/files/jsch.jar"><span style=" font-weight:600; text-decoration: underline; color:#0000ff;">prepared file</span></a><span style=" font-weight:600;"> or compile it yourself (see below). In the case of NetBeans you have to look for a file called </span><span style=" font-weight:600; font-style:italic;">modules/com-jcraft-jsch.jar</span><span style=" font-weight:600;"> and for PhpStorm you have to replace </span><span style=" font-weight:600; font-style:italic;">lib/jsch-0.1.50.jar</span><span style=" font-weight:600;">. The latter my have a different version in your case.<br /></span><br />Hopefully this fixes the issue! If not or if you’d like to compile and pack your own version or if you want to read some more details, read on.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:0px; -qt-block-indent:1; text-indent:0px;">As you can see <a href="http://sourceforge.net/p/jsch/bugs/79/"><span style=" text-decoration: underline; color:#0000ff;">here</span></a> and <a href="https://sourceforge.net/p/jsch/patches/7/"><span style=" text-decoration: underline; color:#0000ff;">here</span></a> this issue is known and there is also a patch to solve this issue. So to get a fixed version of JSch you need to download the library, apply the patch and build the jar file. Afterwards you can insert the library in the module folder of your IDE.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:0px; -qt-block-indent:1; text-indent:0px;">Finally, since I’m a happy gentoo user, I decided to create a <a href="https://www.svrnm.de/files/jsch-0.1.51.ebuild"><span style=" text-decoration: underline; color:#0000ff;">ebuild</span></a> for this. This way I can use <span style=" font-style:italic;">emerge</span> to update JSch and reinstall NetBeans.</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">То есть, нужно закрыть NetBeans, скачать файл с правильной реализацией SSH <a href="http://www.svrnm.de/files/jsch.jar"><span style=" text-decoration: underline; color:#0000ff;">http://www.svrnm.de/files/jsch.jar</span></a>, и заменить им файл <span style=" font-family:'Courier New'; color:#6a1009;">NetBeans 8.0.2/ide/modules/com-jcraft-jsch.jar</span>. На всякий случай рекомендуется сделать резервную копию заменяемого файла.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>