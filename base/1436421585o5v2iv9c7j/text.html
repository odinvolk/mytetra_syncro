<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">Примечание: Это статья 2010 года. Все, что описано здесь - совершенно не для чайника. Так мучиться с инсталляцией программы может только очень, очень упорный луноход.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:14pt; font-weight:600;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:14pt; font-weight:600;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600;">ZoneMinder для чайника - настраиваем видеонаблюдение</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Наверно каждому может пригодиться простая система видеонаблюдения. Следить за подъездом, за машиной... Да хоть за котом!<br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">* * *</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Итак, начнем с предистории. Есть торговая немаленькая фирма, у которой есть склад. Тоже немаленький. Особенностью данного склада является необходимость видеозаписи происходящего на столах &quot;контроллеров&quot;. Система эта организована следующим образом: Есть выделенный &quot;сервер&quot; под WinXP Prof. Стандартная мать, процессор, но винтов - три, два из них по 2Т, для архива. И на борту - плата видеозахвата на 16 аналоговых камер. Работает под удивительно кривым виндовс-софтом. Естественно, закрытым. Причем - запускается только с правами администратора, только при открытом сеансе, сервисом работать не умеет. Да и вообще - мне не нравится.<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Видеонаблюдение обслуживает ИП, причем самый знающий сотрудник - просто &quot;самоходный инсталлятор&quot;. Я собирался у него поучиться работе с этой системой на примере ее переустановки. Воскресенье, выходной, никто не работает. Собираемся на складе - я и специалист. Я привез с собой новый винт - и предлагаю на него поставить систему, чтобы не трогать уже установленную. После обсуждения целесообразности такого подхода он соглашается. Лень ему было подождать минут 40... А в дальнейшем оказалось - очень верный подход. Потому что _после_ установки &quot;специалист&quot; (С) задал мне удивительный вопрос: </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">С - Ну что, остальные винты форматируем?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">Я - ЗАЧЕМ?!</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">С - Ну, я всегда так делаю.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">Я - А как же использовать сужествующие записи?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">С - Я не умею переносить!</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">Я - А на*** мы все это делали?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">С - Ну, Вы ж хотели переустановить...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">С - Я просто знаю что и как делать, на какие кнопки нажимать, я много лет этим занимаюсь и лучше меня нет в регионе!</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">Я - То есть Вы хотите удалить все записанное просто потому что не знаете как оно хранится?!</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">С - да.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">Я - А если бы винт накрылся системный?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">С - ...*совсем_оффтоп off*</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">По итогам общения (я был довольно корректен и не стал говорить &quot;спецу&quot; все, что думаю) - подумал о том чтобы неплохо поставить свою систему.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">* * *</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">15 минут в гугле дали двух кандидатов: Motion и Zoneminder <a href="http://www.zoneminder.com"><span style=" text-decoration: underline; color:#0000ff;">www.zoneminder.com</span></a><br />Собрана тестовая машинка: интегрированная мать Asus P5KPL, процессор Cel 2.5 Ггц, память 2ГБ.<br />В качестве системного диска выбрана Compact Flsah на 8 ГБ - через переходник на IDE.<br />Для архива - SATA диск на 320 ГБ.</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Шаг 1: Установка системы</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Выбор пал на Debian, так как более привычен. Флешка в картридер своей машины (вот в этом - главный плюс! В случае чего - в 2 минуты выдергивается, подмонтируется и правится). Делаем три примари раздела:<br /><span style=" font-family:'Courier New,courier';"><br />/dev/sdb1 * 1 6 48163+ 83 Linux<br />/dev/sdb2 7 870 6940080 83 Linux<br />/dev/sdb3 871 974 835380 83 Linux<br /></span><br />Первоначально хотел отвести 3 раздел подж своп - но одумался.<br />Монтируем второй раздел, debootstrap - и через 5 минут получаем систему. Я ставил squeeze - так как ZM версии 1.24 требует свежих пакетов.<br />Монтируем первый раздел и ставим grub. Далее chroot в установленную систему, apt-get install mc ssh<br />Настраиваем сеть, apt, меню груба, ставим ядро (у меня 2.6.32-5-686).<br />Фух. Флешку - в тестовую машину, запускаем.<br /><span style=" font-family:'Courier New,courier';"><br />apt-get install zoneminder<br /></span><br />Он тянет за собой все что нужно, так что пока скачаются мускуль и апач - пьем %любимый_напиток% и/или курим.</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Шаг 2: Настройка</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Тут я буду использовать инфо из инструкции по установке с оффсайта: <a href="http://www.zoneminder.com/wiki/index.php/Documentation#Installation_from_a_.deb"><span style=" text-decoration: underline; color:#0000ff;">http://www.zoneminder.com/wiki/index.php/Documentation#Installation_from...</span></a><br />Первым делом создаем ссылку для апача на конфиг сайта ZM:<br /><span style=" font-family:'Courier New,courier';"><br />sudo ln -s /etc/zm/apache.conf /etc/apache2/conf.d/zoneminder.conf<br /><br />Потом перезапускам апач, мне почему-то потребовалось его перезапустить несколько раз, а может локальный кэш не обновлялся..<br /><br />/etc/init.d/apache2 restart<br /><br />Важно! Добавляем апача в группу video. Если не сделать - потратим лишний час на выяснение, почему нет картинки.<br /><br />adduser www-data video<br /><br />Заходим на </span><a href="http://Address_of_server/zm/index.php"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">http://Address_of_server/zm/index.php</span></a><span style=" font-family:'Courier New,courier';"> - и наблюдаем интерфейс.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">И самое веселое - начинаем пытаться увидеть свои камеры...<br />Для теста я использовал дешевую и распространенную Web-камеру Defender G-Lens 324 (около 350 рублей цена)<br />Выглядит она так:<br /><span style=" font-family:'Courier New,courier';"><br />videoserv:/etc/apt# lsusb<br />Bus 005 Device 002: ID 093a:2620 Pixart Imaging, Inc.<br />Ставим пакет v4l-conf.<br />Делаем v4l-info /dev/video0<br />Видим самое главное:<br />general info<br />VIDIOC_QUERYCAP<br />driver : &quot;pac7311&quot;<br />card : &quot;USB Camera (093a:2620)&quot;<br />bus_info : &quot;usb-0000:00:1d.3-2&quot;<br />version : 2.7.0<br />capabilities : 0x5000001 [VIDEO_CAPTURE,READWRITE,STREAMING]<br /></span><br />То есть определилась.<br />Пытаемся настроить в ZM:<br />Жмем &quot;Add new monitor&quot;<br />переходим на вкладку &quot;Sources&quot;<br />Заполняем:</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><span style=" font-family:'Courier New'; color:#6a1009;">Device Path /dev/video0<br />Capture Method Video For Linux version 2<br />Device Channel 0<br />Device Format PAL<br />Capture Palette JPEG<br />Capture Width 640<br />Capture Height 480<br />Preserve Aspect Ratio<br />Orientation Normal</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Ссылки сверху (Probe и Presets) - нам бесполезны, предназначены для опознания нескольких сетевых камер.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сохраняем, после обновления страницы смотрим на _цвет_ пути источника в колонке Source. Если красный - что-то не так. Не отчаиваемся, клацаем в веб-интерфейсе на имя созданного монитора... И - беспорядочные полосы, помехи или вообще черный экран. Ничего страшного. Для начала - открываем в консоли <span style=" font-family:'Courier New'; color:#6a1009;">tail -f /tmp/*</span> и посматриваем туда на предмет дебага. Для теста устройства используем команду<br /><span style=" font-family:'Courier New,courier';"><br />videoserv:/etc/apt# zmu -d /dev/video0 -v -q<br />Video Device: /dev/video0<br />General Capabilities<br />Driver: pac7311<br />Card: USB Camera (093a:2620)<br />Bus: usb-0000:00:1d.3-2<br />Version: 2.7.0<br />Type: 0x5000001<br />Supports video capture (X)<br />Does not support video output<br />Does not support frame buffer overlay<br />Does not support VBI capture<br />Does not support VBI output<br />Does not support sliced VBI capture<br />Does not support sliced VBI output<br />Does not support video output overlay<br />Does not have tuner<br />Does not have audio in and/or out<br />Does not have radio<br />Supports read/write i/o (X)<br />Does not support async i/o<br />Supports streaming i/o (X)<br />Standards:<br />Formats:<br />PJPG (PJPG)<br />Crop Capabilities<br />Bounds: 0 x 0<br />Default: 0 x 0<br />Current: Cropping is not supported<br />Inputs: 1<br />Input 0<br />Name: pac7311<br />Type: Camera<br />Audioset: 00000000<br />Standards: 0x0<br />Power on (X)<br />Signal detected (X)<br />Colour Signal detected<br />Horizontal Lock detected</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Если вывод осмысленный - то хорошо.<br />Если нет - пробуем V4L версии 1.<br /><span style=" font-family:'Courier New,courier';"><br />zmu -d /dev/video0 -v -q -V1<br /></span><br />Должно быть что-то похожее:<br /><span style=" font-family:'Courier New,courier';"><br />videoserv:/etc/apt# zmu -d /dev/video0 -v -q -V1<br />Video Device: /dev/video0<br />Video Capabilities<br />Name: USB Camera (093a:2620)<br />Type: 1<br />Can capture<br />Video Channels: 1<br />Audio Channels: 0<br />Maximum Width: 640<br />Maximum Height: 480<br />Minimum Width: 48<br />Minimum Height: 32<br />Window Attributes<br />X Offset: 0<br />Y Offset: 0<br />Width: 640<br />Height: 480<br />Picture Attributes<br />Palette: 0 - Unknown<br />Colour Depth: 8<br />Brightness: 32768<br />Hue: 0<br />Colour :32639<br />Contrast: 32639<br />Whiteness: 0<br />Channel 0 Attributes<br />Name: pac7311<br />Channel: 0<br />Flags: 0<br />Type: 2 - Camera<br />Format: 0 - PAL<br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для некоторых камер (моей - тоже) вывод содержит ошибку:<br /><span style=" font-family:'Courier New,courier';"><br />Error, failed to query crop: /dev/video0: Invalid argument<br /></span><br />Не страшно! Есть патч <a href="http://www.zoneminder.com/forums/viewtopic.php?p=59472"><span style=" text-decoration: underline; color:#0000ff;">[FIX] ZM 1.24.2 &quot;Error, failed to query crop&quot;</span></a><br />переходим в /usr/src и делаем:<br /><span style=" font-family:'Courier New,courier';"><br />svn co </span><a href="http://svn.zoneminder.com/svn/zm/trunk"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">http://svn.zoneminder.com/svn/zm/trunk</span></a><span style=" font-family:'Courier New,courier';"> zm<br /></span><br />Далее - cd zm, и конфигурим. Но! Так как мы сначала поставили пакет - то конфигурим так, чтобы бинарники собирались с правильными путями. Для того, чтобы можно было собранными менять установленные из пакета. Первым делом редактируем скрипт <span style=" font-family:'Courier New'; color:#6a1009;">/usr/src/zm/configure</span>. Ищем строку <span style=" font-family:'Courier New'; color:#6a1009;">sysconfdir=</span> и меняем путь на:<br /><span style=" font-family:'Courier New,courier';"><br />sysconfdir='${prefix}/etc/zm' - потому что пакет хранит конфип именно в /etc/zm/zm.conf<br /></span><br />Теперь конфигурим:<br /><span style=" font-family:'Courier New,courier';"><br />./configure --with-webdir=/usr/share/zoneminder --with-cgidir=/usr/share/zoneminder/cgi-bin --enable-mmap=no --with-webuser=www-data --with-webgroup=www-data --bindir=/usr/bin --enable-debug=yes ZM_SSL_LIB=openssl<br /></span><br />В процессе устанавлисаем зависимости. Например dev пакет mysql - и еще несколько.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Когда (если) configure пройдет без ошибок - можно делать <span style=" font-family:'Courier New'; color:#6a1009;">make</span>. Но один нюанс все равно есть - если (почти наверняка) cpp будет версии 4.4 - то в файл /usr/src/zm/src/zm_utils.cpp надо добавить строку<br /><span style=" font-family:'Courier New,courier';"><br />#include<br /></span><br />Иначе ругается. Для начала попробуем собрать без изменений. <span style=" font-weight:600;">После make НЕ НАДО делать make install!</span> Все что надо будем копировать ручками. Если ошибок нет, идем в /usr/src/zm/src и запускаем:<br /><span style=" font-family:'Courier New,courier';"><br />./zmu -d /dev/video0 -v -q<br /></span><br />Обязательно свежесобранный. Для уверенности даже так:<br /><span style=" font-family:'Courier New,courier';"><br />/usr/src/zm/src/zmu -d /dev/video0 -v -q<br /></span><br />Этим мы убеждаемся (по отсутствию Abort в выводе) что бинарник читает наш конфиг и вообще работает. <br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Затем накладываем на zm_local_camera.cpp патч:<br /><span style=" font-family:'Courier New,courier';"><br />911,912c911<br />&lt; int crop_rc = vidioctl( vid_fd, VIDIOC_G_CROP, &amp;crop );<br />&lt; if ((crop_rc &lt; 0 ) &amp;&amp; (errno != EINVAL))<br />---<br />&gt; if ( vidioctl( vid_fd, VIDIOC_G_CROP, &amp;crop ) &lt; 0 )<br />921,928c920,921<br />&lt; if ( verbose ) {<br />&lt; if (crop_rc &gt;= 0) {<br />&lt; sprintf( output+strlen(output), &quot; Current: %d x %d\n&quot;, crop.c.width, crop.c.height );<br />&lt; }<br />&lt; else {<br />&lt; sprintf( output+strlen(output), &quot; Current: Cropping is not supported\n&quot;);<br />&lt; }<br />&lt; }<br />---<br />&gt; if ( verbose )<br />&gt; sprintf( output+strlen(output), &quot; Current: %d x %d\n&quot;, crop.c.width, crop.c.height );<br /></span><br />Да, я еще нашел все сообщения о ошибках<br /><span style=" font-family:'Courier New,courier';"><br />sprintf( output, &quot;Error, failed to query crop capabilities %s: %s\n &quot; , queryDevice, strerror(errno) );<br /></span><br />и добавил &quot;цифры&quot; для отладки - чтобы знать какое именно сообщение срабатывает.<br /><span style=" font-family:'Courier New,courier';"><br />sprintf( output, &quot;Error, failed to query crop (6) capabilities %s: %s\n &quot; , queryDevice, strerror(errno) );<br /></span><br />Но это не обязательно...<br />После сборки с патчем - меняем файлы в /usr/bin на свежескомпилированные (просто копируем поверх).<br />Если после перезапуска ZM камера снова не работает - выполняем Хинт 2</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">После make НЕ НАДО делать make install! Все что надо будем копировать ручками.</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Хинт 1</span><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если в выводе логов видим zmserver zmwatch[3093]: ERR [Can't get shared memory id '7a6d0001', 1: No such file or directory]<br />значит надо править (добавлять) в /etc/sysctl.conf<br /><span style=" font-family:'Courier New,courier';"><br />kernel.shmall = 268435456<br />kernel.shmmax = 268435456<br /></span><br />Конкретное значение зависит от наличия памяти в системе. (требует перезагрузки) или:<br /><span style=" font-family:'Courier New,courier';"><br />echo 268435456 &gt;/proc/sys/kernel/shmall<br />echo 268435456 &gt;/proc/sys/kernel/shmmax<br /></span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Хинт 2. Работающий вариант добавления &quot;совместимости&quot;</span><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Многие (не все) камеры USB требуют предварительной подгрузки библиотек v4l.<br />Берем и редактируем файд /usr/bin/zmdc.pl<br /><span style=" font-family:'Courier New,courier';"><br />После строки $ENV{SHELL} = '/bin/sh' if exists $ENV{SHELL};<br /></span><br />Вставляем подгрузку библиотек (лень оформлять патчем):<br /><span style=" font-family:'Courier New,courier';"><br />$ENV{LD_PRELOAD} = '/usr/lib/libv4l/v4l1compat.so';<br />$ENV{LD_PRELOAD} = '/usr/lib/libv4l/v4l2convert.so';<br /></span><br />до строки:<br /><span style=" font-family:'Courier New,courier';"><br />delete @ENV{qw(IFS CDPATH ENV BASH_ENV)};<br /></span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Хинт 3</span><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В ZM можно настроить почти все модели камер. Метод проверки вашего источника прост:<br /><span style=" font-family:'Courier New,courier';"><br />xawtv -c /dev/video0<br /></span><br />Или<br /><span style=" font-family:'Courier New,courier';"><br />cheese<br /></span><br />Или<br /><span style=" font-family:'Courier New,courier';"><br />mplayer tv:// -tv driver=v4l2:outfmt=yuy2:width=640:height=480:device=/dev/video0<br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Ну а &quot;приятное&quot; - настройка датчика движения и прочего - уже через веб-интерфейс.<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Да, место где хранится информация указывается ссылкой в каталоге:<br /><span style=" font-family:'Courier New,courier';"><br />/usr/share/zoneminder/events<br /></span><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>