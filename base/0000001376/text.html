<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">Установка для «чайников»: nginx + php-cgi + mysql + eaccelerator + memcache на Debian 5.0 «lenny»</span><span style=" font-size:x-large; font-weight:600;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Данная заметка является шпаргалкой для новичков в установке нормально работающего комплекса, описанного в заголовке. Все пункты установки протестированы несколько раз на разных vds, поэтому проблем с нехваткой чего-то быть не должно, как это обычно бывает, когда ставишь что-то по мануалам, надерганных из разных источников. Подробно описания настроек и «тюнинга» в заметке нет, т.к. это всё очень индивидуально и требует понимания что, как и зачем делается, а это невозможно охватить в одной даже очень большой шпоре. :)<br /><a name="habracut"></a><br />Перво-наперво обновляем список пакетов:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">apt-get update</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Ставим необходимое для ручной установки и некоторых других хитрым манипуляций:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">apt-get install build-essential</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">NGINX</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Ставим библиотеки, необходимые для установки nginx в той конфигурации, которую мы будем ставить (pcre обязательная всегда, ssl — опционально, если конфигурируем nginx с ней):<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">apt-get install libpcre3-dev<br />apt-get install openssl<br />apt-get install libcurl4-openssl-dev</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />В пакетах Дебиана, к сожалению, в стабильном варианте валяется очень старая версия nginx, поэтому будем ставить сервер вручную. Заходим в темп:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">cd /tmp</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Качаем последнюю стабильную версию nginx, распаковываем и заходим в папку установки:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">wget httр://sysoev.ru/nginx/nginx-0.7.61.tar.gz<br />tar -zxvf nginx-0.7.61.tar.gz<br />cd nginx-0.7.61</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Конфигурим и устанавливаем:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">./configure \<br />--user=www-data \<br />--group=www-data \<br />--with-http_ssl_module \<br />--with-http_realip_module \<br />--with-http_addition_module \<br />--with-http_sub_module \<br />--with-http_dav_module \<br />--with-http_flv_module \<br />--with-http_gzip_static_module \<br />--with-mail \<br />--with-mail_ssl_module<br />make<br />make install</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Запускаем:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">/usr/local/nginx/sbin/nginx</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Заходим в браузер, набираем наш ip/домен и видим:<br /><br /><span style=" font-weight:600;">Welcome to nginx!</span><br /><br />Значит, всё хорошо. Теперь нам нужно добавить nginx в автозагрузку. Для этого создаем файл '/etc/init.d/nginx' следующего содержания:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#! /bin/sh<br /><br />### BEGIN INIT INFO<br /># Provides: nginx<br /># Required-Start: $all<br /># Required-Stop: $all<br /># Default-Start: 2 3 4 5<br /># Default-Stop: 0 1 6<br /># Short-Description: starts the nginx web server<br /># Description: starts nginx using start-stop-daemon<br />### END INIT INFO<br /><br />PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin<br />DAEMON=/usr/local/nginx/sbin/nginx<br />NAME=nginx<br />DESC=nginx<br /><br />test -x $DAEMON || exit 0<br /><br /># Include nginx defaults if available<br />if [ -f /etc/default/nginx ] ; then<br />. /etc/default/nginx<br />fi<br /><br />set -e<br /><br />case "$1" in<br />start)<br />echo -n "Starting $DESC: "<br />start-stop-daemon --start --quiet --pidfile /usr/local/nginx/logs/nginx.pid --exec $DAEMON -- $DAEMON_OPTS<br />echo "$NAME."<br />;;<br />stop)<br />echo -n "Stopping $DESC: "<br />start-stop-daemon --stop --quiet --pidfile /usr/local/nginx/logs/nginx.pid --exec $DAEMON<br />echo "$NAME."<br />;;<br />restart|force-reload)<br />echo -n "Restarting $DESC: "<br />start-stop-daemon --stop --quiet --pidfile /usr/local/nginx/logs/nginx.pid --exec $DAEMON<br />sleep 1<br />start-stop-daemon --start --quiet --pidfile /usr/local/nginx/logs/nginx.pid --exec $DAEMON -- $DAEMON_OPTS<br />echo "$NAME."<br />;;<br />reload)<br />echo -n "Reloading $DESC configuration: "<br />start-stop-daemon --stop --signal HUP --quiet --pidfile /usr/local/nginx/logs/nginx.pid --exec $DAEMON<br />echo "$NAME."<br />;;<br />*)<br />N=/etc/init.d/$NAME<br />echo "Usage: $N {start|stop|restart|force-reload}" &gt;&amp;2<br />exit 1<br />;;<br />esac<br /><br />exit 0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Делаем исполняемым и добавляем nginx в автозагрузку:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">chmod 755 /etc/init.d/nginx<br />update-rc.d nginx defaults</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Теперь мы можем управлять нашим http-сервером с помощью следующих команд:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">/etc/init.d/nginx start<br />/etc/init.d/nginx restart<br />/etc/init.d/nginx stop</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">PHP-FASTCGI</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />PHP я предлагаю ставить из коллекции пакетов. Сейчас там лежит стабильная версия 5.2.6 — да, не последняя из 5.2, но зато не глючит. Я пробовал ставить 5.2.10 из тестовых пакетов, в связке с nginx работало не стабильно. :( Устанавливаем PHP с некоторыми обязательными расширениями (необходимые именно вам расширения вы можете добавить сразу или позже):<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">apt-get install php5-cgi php5-mysql php5-curl php5-gd php5-json php5-mcrypt php5-memcache</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Далее заходим в '/etc/php5/cgi/php.ini', где добавляем строку в конец файла:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">cgi.fix_pathinfo = 1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Добавим php в автозагрузку. Для чего оздаем скрипт '/etc/init.d/php-fastcgi' следующего содержания:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#! /bin/sh<br />### BEGIN INIT INFO<br /># Provides: php-fastcgi<br /># Required-Start: $all<br /># Required-Stop: $all<br /># Default-Start: 2 3 4 5<br /># Default-Stop: 0 1 6<br /># Short-Description: Start and stop php-cgi in external FASTCGI mode<br /># Description: Start and stop php-cgi in external FASTCGI mode<br />### END INIT INFO<br /><br /># Author: Kurt Zankl &lt;kz@xon.uni.cc&gt;<br /><br /># Do NOT "set -e"<br /><br />PATH=/sbin:/usr/sbin:/bin:/usr/bin<br />DESC="php-cgi in external FASTCGI mode"<br />NAME=php-fastcgi<br />DAEMON=/usr/bin/php-cgi<br />PIDFILE=/var/run/$NAME.pid<br />scriptNAME=/etc/init.d/$NAME<br /><br /># Exit if the package is not installed<br />[ -x "$DAEMON" ] || exit 0<br /><br /># Read configuration variable file if it is present<br />[ -r /etc/default/$NAME ] &amp;&amp; . /etc/default/$NAME<br /><br /># Load the VERBOSE setting and other rcS variables<br />. /lib/init/vars.sh<br /><br /># Define LSB log_* functions.<br /># Depend on lsb-base (&gt;= 3.0-6) to ensure that this file is present.<br />. /lib/lsb/init-functions<br /><br /># If the daemon is not enabled, give the user a warning and then exit,<br /># unless we are stopping the daemon<br />if [ "$START" != "yes" -a "$1" != "stop" ]; then<br />log_warning_msg "To enable $NAME, edit /etc/default/$NAME and set START=yes"<br />exit 0<br />fi<br /><br /># Process configuration<br />export PHP_FCGI_CHILDREN PHP_FCGI_MAX_REQUESTS<br />DAEMON_ARGS="-q -b $FCGI_HOST:$FCGI_PORT"<br /><br />do_start()<br />{<br /># Return<br /># 0 if daemon has been started<br /># 1 if daemon was already running<br /># 2 if daemon could not be started<br />start-stop-daemon --start --quiet --pidfile $PIDFILE --exec $DAEMON --test &gt; /dev/null || return 1<br />start-stop-daemon --start --quiet --pidfile $PIDFILE --exec $DAEMON --background --make-pidfile --chuid $EXEC_AS_USER --startas $DAEMON -- $DAEMON_ARGS || return 2<br />}<br /><br />do_stop()<br />{<br /># Return<br /># 0 if daemon has been stopped<br /># 1 if daemon was already stopped<br /># 2 if daemon could not be stopped<br /># other if a failure occurred<br />start-stop-daemon --stop --quiet --retry=TERM/30/KILL/5 --pidfile $PIDFILE &gt; /dev/null # --name $DAEMON<br />RETVAL="$?"<br />[ "$RETVAL" = 2 ] &amp;&amp; return 2<br /># Wait for children to finish too if this is a daemon that forks<br /># and if the daemon is only ever run from this initscript.<br /># If the above conditions are not satisfied then add some other code<br /># that waits for the process to drop all resources that could be<br /># needed by services started subsequently. A last resort is to<br /># sleep for some time.<br />start-stop-daemon --stop --quiet --oknodo --retry=0/30/KILL/5 --exec $DAEMON<br />[ "$?" = 2 ] &amp;&amp; return 2<br /># Many daemons don't delete their pidfiles when they exit.<br />rm -f $PIDFILE<br />return "$RETVAL"<br />}<br /><br />case "$1" in<br />start)<br />[ "$VERBOSE" != no ] &amp;&amp; log_daemon_msg "Starting $DESC" "$NAME"<br />do_start<br />case "$?" in<br />0|1) [ "$VERBOSE" != no ] &amp;&amp; log_end_msg 0 ;;<br />2) [ "$VERBOSE" != no ] &amp;&amp; log_end_msg 1 ;;<br />esac<br />;;<br />stop)<br />[ "$VERBOSE" != no ] &amp;&amp; log_daemon_msg "Stopping $DESC" "$NAME"<br />do_stop<br />case "$?" in<br />0|1) [ "$VERBOSE" != no ] &amp;&amp; log_end_msg 0 ;;<br />2) [ "$VERBOSE" != no ] &amp;&amp; log_end_msg 1 ;;<br />esac<br />;;<br />restart|force-reload)<br />log_daemon_msg "Restarting $DESC" "$NAME"<br />do_stop<br />case "$?" in<br />0|1)<br />do_start<br />case "$?" in<br />0) log_end_msg 0 ;;<br />1) log_end_msg 1 ;; # Old process is still running<br />*) log_end_msg 1 ;; # Failed to start<br />esac<br />;;<br />*)<br /># Failed to stop<br />log_end_msg 1<br />;;<br />esac<br />;;<br />*)<br />echo "Usage: $scriptNAME {start|stop|restart|force-reload}" &gt;&amp;2<br />exit 3<br />;;<br />esac</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Делаем исполяемым:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">chmod 755 /etc/init.d/php-fastcgi</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Создаем другой файл '/etc/default/php-fastcgi', чтобы мы могли контролировать php-fastcgi (слушать порты, получать количество дочерних процессов и другие запросы), такого содержания:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#<br /># Settings for php-cgi in external FASTCGI Mode<br />#<br /><br /># Should php-fastcgi run automatically on startup? (default: no)<br />START=yes<br /><br /># Which user runs PHP? (default: www-data)<br />EXEC_AS_USER=www-data<br /><br /># Host and TCP port for FASTCGI-Listener (default: localhost:9000)<br />FCGI_HOST=localhost<br />FCGI_PORT=9000<br /><br /># Environment variables, which are processed by PHP<br />PHP_FCGI_CHILDREN=5<br />PHP_FCGI_MAX_REQUESTS=1000</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Запускаем php-fastcgi:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">/etc/init.d/php-fastcgi start</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Добавляем в автозагрузку:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">update-rc.d php-fastcgi defaults</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">Дружим NGINX и PHP</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Создадим папку для сайтов, например, '/home/www'.<br /><br />Редактируем '/usr/local/nginx/conf/nginx.conf'. Указываем под кем будем запускать nginx:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">user www-data www-data;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />В контейнере server {} изменим/раскоментируем следующие строки:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">location / {<br />root /home/www;<br />index index.php index.html index.htm;<br />}<br /><br />location ~ \.php$ {<br />root /home/www;<br />fastcgi_pass 127.0.0.1:9000;<br />fastcgi_index index.php;<br />fastcgi_param script_FILENAME /home/www$fastcgi_script_name;<br />include fastcgi_params;<br />}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Перезапускаем nginx:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">/etc/init.d/nginx restart</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Создаем файл для теста '/home/www/info.php' следующего содержания:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&lt;?php<br />phpinfo();<br />?&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Проверяем в браузере — httр://ваш-адрес/info.php<br /><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">MYSQL</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Ставим:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">apt-get install mysql-server mysql-client</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />В процессе будет предложено установить пароль рута, который можно всегда поменять так:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqladmin -u root password tralala</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">EACCELERATOR</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Печально, но eAccelerator вообще отсутствует в установочных пакетах Debian. Будем ставить руками. Предварительно нам потребуется установить библиотеку php-developer:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">apt-get install php5-dev</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Теперь скачиваем и устанавливаем eAccelerator:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">cd /tmp<br />wget httр://bart.eaccelerator.net/source/0.9.5.3/eaccelerator-0.9.5.3.tar.bz2<br />tar xvfj eaccelerator-0.9.5.3.tar.bz2<br />cd eaccelerator-0.9.5.3<br />phpize<br />./configure<br />make<br />make install</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Создаем конфигурационный файл '/etc/php5/conf.d/eaccelerator.ini' следующего содержания:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">extension="eaccelerator.so"<br />eaccelerator.shm_size="64"<br />eaccelerator.cache_dir="/var/cache/eaccelerator"<br />eaccelerator.enable="1"<br />eaccelerator.optimizer="1"<br />eaccelerator.check_mtime="1"<br />eaccelerator.debug="0"<br />eaccelerator.filter=""<br />eaccelerator.shm_max="0"<br />eaccelerator.shm_ttl="3600"<br />eaccelerator.shm_prune_period="1800"<br />eaccelerator.shm_only="0"<br />eaccelerator.compress="1"<br />eaccelerator.compress_level="9"</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Создаем папку для хранения файлов eAccelerator'а:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mkdir -p /var/cache/eaccelerator<br />chmod 0777 /var/cache/eaccelerator</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Перезапускаем php:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">/etc/init.d/php-fastcgi restart</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">MEMCACHE</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Устанавливаем:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">apt-get install memcached</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Перезапускаем php ещё разок:<br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:40px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">/etc/init.d/php-fastcgi restart</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br />Удачной работы! :)<br /><br />btw, кому интересно, <a href="http://habrahabr.ru/blogs/livestreet/67415/"><span style=" text-decoration: underline; color:#0000ff;">здесь</span></a> вы можете посмотреть тесты работы этого комплекса на vds: 480 MHz / 256 Mb и 1280 MHz / 1024 Mb. </p></body></html>