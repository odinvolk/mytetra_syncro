<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Допустим, нам необходимо подключать заголовочные файлы относительно корня проекта. Надоело указывать относительные пути, потому что из разных каталогов проекта путь до одно и того же заголовка будет разный. Да и вообще относительные пути - это неправильно. Нам нужно научиться указывать пути до заголовочных файлов просто относительно корня проекта.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Обычно, для компиляциив в Linux, можно добавлять в переменную окружения <span style=" font-family:'Courier New'; color:#6a0e07;">INCLUDE_PATH</span> путь к каталогу проекта. После чего будут работать директивы #include с файлами относительно корня проекта. Вот что написано в &quot;Стандарте программирования на C++. Версия 0.1.1.2b&quot;:</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">...препроцессор последовательно перебирает пути в </span><span style=" font-family:'Courier New'; font-style:italic; color:#6a0e07;">INCLUDE_PATH</span><span style=" font-style:italic;"> начиная с первого. Относительный путь из директивы </span><span style=" font-family:'Courier New'; font-style:italic; color:#6a0e07;">include</span><span style=" font-style:italic;"> разрешается относительно (sic) папки из </span><span style=" font-family:'Courier New'; font-style:italic; color:#6a0e07;">INCLUDE_PATH</span><span style=" font-style:italic;">. Если файл не найден, переходим к следующему элементу </span><span style=" font-family:'Courier New'; font-style:italic; color:#6a0e07;">INCLUDE_PATH</span><span style=" font-style:italic;">. Если </span><span style=" font-family:'Courier New'; font-style:italic; color:#6a0e07;">INCLUDE_PATH</span><span style=" font-style:italic;"> исчерпан, компилятор сообщает об ошибке.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Теперь вопрос: как подключать (инклюдить) заголовки относительно корня проекта <span style=" font-weight:600;">кроссплатформенно</span> на Qt?</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Ответ: начиная с версии Qt 4.5, в *.pro файле можно использовать переменную $${_PRO_FILE_PWD_}, которая содержит путь до *.pro файла.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">То есть, если сырцы лежат в поддиректории src относительно *.pro файла:</p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">..  [DIR]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">src [DIR]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">myprogram.pro</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">то путь INCLUDE_PATH можно задать так:</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">INCLUDEPATH += $${_PRO_FILE_PWD_}/src</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">- эту строку надо прописывать в *.pro файле, в нашем случае в myprogram.pro.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">После этого в C++ коде можно будет указывать пути к файлам в директиве <span style=" font-family:'Courier New'; color:#6a0e07;">#include</span> относительно корня проекта.</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>