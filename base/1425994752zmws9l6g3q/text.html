<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">Сборка отладчика GDB под Windows</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Отладчик GDB является важным инструментом среды разработки приложений Qt. Без него Qt Creator, например, теряет большую часть своей функциональности (остается, разве что, подсветка синтаксиса в редакторе и контекстная справка). Вплоть до версии Qt Creator 2.4.1 отладчик GDB устанавливался вместе с Qt Creator, равно как и компилятор MinGW. Начиная с версии Qt Creator 2.5.0, отлачик GDB необходимо собирать самостоятельно. Данная статья призвана оказать помощь в решении этой проблемы. При ее подготовке использовался материал с ресурса <a href="http://qt-project.org/wiki/QtCreatorBuildGdb"><span style=" text-decoration: underline; color:#0000ff;">Wiki от Nokia</span></a>.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Есть хорошая новость! С недавних пор сборка GDB существенно упростилась. Похоже, что это заслуга еще Nokia. Предполагается, что MSYS уже установлен вместе с утилитами patch, unzip и файлом msys-bz2-1.dll (см. <a href="http://qtlinux.narod.ru/install_mingw.htm"><span style=" text-decoration: underline; color:#0000ff;">здесь</span></a>).</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Рассмотрим подробно порядок действий.</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">1.</span> Скачиваем на <a href="http://releases.qt-project.org/qtcreator"><span style=" text-decoration: underline; color:#0000ff;">сайте разработчика</span></a> архив с исходниками Qt Creator</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">qt-creator-2.6.1-src.zip   26 MB<br />(версия, доступная на момент написания статьи)</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">2.</span> Распаковываем архив в корень диска D:\. Переименовываем для удобства папку с исходником D:\qt-creator-2.6.1-src, например, в D:\s (аналогичное действие выполняется при сборке Qt Creator).</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">3.</span> Открываем в текстовом редакторе файл D:\s\dist\gdb\Makefile.mingw, находим неработающую на сегодняшний день ссылку</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a1009;">http://download.qt.nokia.com/misc/gdb/7.4/build-prerequisits/python.zip</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">и исправляем ее на</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a1009;">http://get.qt.nokia.com/misc/gdb/7.4/build-prerequisits/python.zip</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">4.</span> Запускаем MinGW Shell (см. группу ярлыков MinGW в меню Пуск или файл C:\Qt\mingw-4.6\msys\1.0\msys.bat) и вводим команды</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a1009;">cd /d/s/dist/gdb<br />make -f Makefile.mingw</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">5.</span> Результатом сборки будет папка D:\s\dist\gdb\qtcreator-gdb-7.4.1, содержащая две цели i686-pc-mingw32 и arm-none-linux-gnueabi (нас интересует первая) и необходимый набор библиотечных файлов. Переместим эту папку в какое-нибудь удобное для нас место, например в C:\Qt. Теперь в настройках связки инструментов Qt Creator в качестве отладчика следует указывать файл</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a1009;">C:\Qt\qtcreator-gdb-7.4.1\gdb-i686-pc-mingw32.exe</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>