<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для использования GDB под Windows, этот отладчик нужно собирать из исходных текстов. По неизвестным причинам разработчики не предоставляют бинарную сборку под Windows.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Отладчик GDB является важным инструментом среды разработки приложений Qt. Без него Qt Creator, например, теряет большую часть своей функциональности (остается, разве что, подсветка синтаксиса в редакторе и контекстная справка). Вплоть до версии Qt Creator 2.4.1 отладчик GDB устанавливался вместе с Qt Creator, равно как и компилятор MinGW. Начиная с версии Qt Creator 2.5.0, отлачик GDB необходимо собирать самостоятельно. Данная статья призвана оказать помощь в решении этой проблемы. При ее подготовке использовался материал с ресурса Wiki от Nokia.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Есть хорошая новость! С недавних пор сборка GDB существенно упростилась. Похоже, что это заслуга еще Nokia. Предполагается, что MSYS уже установлен вместе с утилитами patch, unzip и файлом msys-bz2-1.dll. Последовательность установки этих утилит следующая:</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">3. По окончании установки вручную добавим пару полезных утилит, которые не вошли в состав ядра MSYS, но могут оказаться востребованными. Речь идет об утилитах patch и unzip, файлы которых можно найти здесь: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">http://sourceforge.net/projects/mingw/files/MSYS/Extension/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">нужны файлы:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">patch-2.6.1-1-msys-1.0.13-bin.tar.lzma и<br />unzip-6.0-1-msys-1.0.13-bin.tar.lzma</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">Скачанные файлы распаковываем с помощью 7-Zip, и содеожимое папок bin из архивов помещаем в одноименную папку MSYS</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">C:\Qt\mingw-4.6\msys\1.0\bin</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">4. При сборке GDB потребуется еще одна библиотека. Скачиваем файл</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">http://sourceforge.net/projects/mingw/files/MSYS/Base/bzip2/bzip2-1.0.6-1/libbz2-1.0.6-1-msys-1.0.17-dll-1.tar.lzma/download</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">распаковываем его с помощью 7-Zip, и помещаем библиотечный файл msys-bz2-1.dll из папки bin архива в одноименную папку MSYS (см. выше).</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">5. В заключение необходимо прописать в системе путь к компилятору. В системную переменную Path дописываем через точку с запятой</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">C:\Qt\mingw-4.6\bin</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Рассмотрим подробно порядок действий.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1. Скачиваем на <a href="http://releases.qt-project.org/qtcreator"><span style=" text-decoration: underline; color:#0000ff;">сайте разработчика</span></a> архив с исходниками Qt Creator</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">qt-creator-2.6.1-src.zip   26 MB<br />(версия, доступная на момент написания статьи)</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">2. Распаковываем архив в корень диска D:\. Переименовываем для удобства папку с исходником D:\qt-creator-2.6.1-src, например, в D:\s (аналогичное действие выполняется при сборке Qt Creator).</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">3. Открываем в текстовом редакторе файл D:\s\dist\gdb\Makefile.mingw, находим неработающую на сегодняшний день ссылку</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">http://download.qt.nokia.com/misc/gdb/7.4/build-prerequisits/python.zip</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">и исправляем ее на</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">http://get.qt.nokia.com/misc/gdb/7.4/build-prerequisits/python.zip</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">4. Запускаем MinGW Shell (см. группу ярлыков MinGW в меню Пуск или файл C:\Qt\mingw-4.6\msys\1.0\msys.bat) и вводим команды</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">cd /d/s/dist/gdb<br />make -f Makefile.mingw</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">5. Результатом сборки будет папка D:\s\dist\gdb\qtcreator-gdb-7.4.1, содержащая две цели i686-pc-mingw32 и arm-none-linux-gnueabi (нас интересует первая) и необходимый набор библиотечных файлов. Переместим эту папку в какое-нибудь удобное для нас место, например в C:\Qt. Теперь в настройках связки инструментов Qt Creator в качестве отладчика следует указывать файл</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">C:\Qt\qtcreator-gdb-7.4.1\gdb-i686-pc-mingw32.exe</p></body></html>