<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'Arial'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для понимания нужно вспомнить <a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%B8_%28%D1%8F%D0%B7%D1%8B%D0%BA_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F%29#.D0.98.D1.81.D1.82.D0.BE.D1.80.D0.B8.D1.8F_.D0.A1.D0.B8"><span style=" text-decoration: underline; color:#0000ff;">историю Си</span></a>. Пара аспирантов и пара студентов делала структурный ассемблер для <a href="https://ru.wikipedia.org/wiki/PDP-7"><span style=" text-decoration: underline; color:#0000ff;">PDP-7</span></a>. Машина была словной (16 битные слова), а язык безтиповым и назывался <a href="https://ru.wikipedia.org/wiki/%D0%91%D0%B8_%28%D1%8F%D0%B7%D1%8B%D0%BA_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F%29"><span style=" text-decoration: underline; color:#0000ff;">Би</span></a>.<br /><br />От PDP-7 в языке Си остались такие конструкции как эквивалентность <span style=" font-weight:600;">arr[i]</span> и <span style=" font-weight:600;">*(arr+i</span>). На безтиповом языке для словной машине это было просто сложение.<br /><br />Когда они решили перейти на <a href="https://ru.wikipedia.org/wiki/PDP-11"><span style=" text-decoration: underline; color:#0000ff;">PDP-11</span></a>, безтиповым языком было уже не обойтись. PDP-11 была словной машиной с адресацией до байта. То есть по четном адресу можно было прочитать и слово и байт, а по нечетному — только байт. Поэтому им пришлось вводить типы. Ну и сменить название языка на Си.<br /><br />И тогда, для ускорения переделок, была придумана гениальная идея. Вместо описания типа — описывать, какими преобразованиями переменная приводится к базовому типу. i<span style=" font-weight:600;">nt **pp</span> означает, что если дважды разыменовать <span style=" font-weight:600;">pp</span>, то получиться <span style=" font-weight:600;">int</span>. Этих хаком они упростили себе переделку компилятора,<br /><br />От PDP-11 в Си осталась конструкция <span style=" font-weight:600;">*dst++ = *src++</span>, которая транслировалась в одну команду <span style=" font-weight:600;">mov (R5)++, (R3)++</span><br /><br />Если бы вы начали изучение Си с <a href="https://ru.wikipedia.org/wiki/%D0%AF%D0%B7%D1%8B%D0%BA_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F_%D0%A1%D0%B8_%28%D0%BA%D0%BD%D0%B8%D0%B3%D0%B0%29"><span style=" text-decoration: underline; color:#0000ff;">The C Programming Language</span></a>, то там довольно явно рассказывается об этом…<br /><br />Ну а первые впечатления от Си (1984 год): вау, какой красивый ассемблер! Теперь можно писать код на ЯВУ и понимать, какие команды будут исполняться! Особенность компиляции (из.с в .s, а уж потом в .obj) этому только помогали.<br /><br />Но да, к 1990ому году пришли иные машины и иные компиляторы. И Си перестал восприниматься ассемблером конкретной машины. А хак с заменой описания переменных на описание преобразования в базовые типы — остался. </p></body></html>